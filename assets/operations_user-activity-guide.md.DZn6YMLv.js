import{_ as e,o as a,c as r,ah as s}from"./chunks/framework.504LQ1l3.js";const i="/assets/activity-main-view-01.BE2Fhvbb.png",o="/assets/activity-oauth-user-01.BlsOOrkV.png",n="/assets/activity-security-01.Dq3arfel.png",l="/assets/activity-audit-01.B9rcUW70.png",b=JSON.parse('{"title":"User Activity Tracking Guide","description":"","frontmatter":{},"headers":[],"relativePath":"operations/user-activity-guide.md","filePath":"operations/user-activity-guide.md"}'),u={name:"operations/user-activity-guide.md"};function c(g,t,d,h,p,y){return a(),r("div",null,[...t[0]||(t[0]=[s('<h1 id="user-activity-tracking-guide" tabindex="-1">User Activity Tracking Guide <a class="header-anchor" href="#user-activity-tracking-guide" aria-label="Permalink to &quot;User Activity Tracking Guide&quot;">​</a></h1><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>The AI Security Gateway provides user activity tracking to monitor user interactions with MCP servers and LLM APIs. This guide covers the three main areas where you can view user activity:</p><ul><li><strong>User Activity Dashboard</strong>: Basic user statistics and top active users</li><li><strong>Security Alerts</strong>: Security violations and blocked requests per user</li><li><strong>Audit Logs</strong>: Detailed request logs with user attribution</li></ul><p><img src="'+i+'" alt="User Activity Dashboard"></p><hr><h2 id="user-activity-dashboard" tabindex="-1">User Activity Dashboard <a class="header-anchor" href="#user-activity-dashboard" aria-label="Permalink to &quot;User Activity Dashboard&quot;">​</a></h2><h3 id="accessing-user-activity" tabindex="-1">Accessing User Activity <a class="header-anchor" href="#accessing-user-activity" aria-label="Permalink to &quot;Accessing User Activity&quot;">​</a></h3><p>To view user activity statistics and top active users:</p><ol><li>Navigate to <strong>Access &amp; Identity</strong> → <strong>User Activity</strong></li><li>View the dashboard showing: <ul><li><strong>Unique Users</strong>: Total number of active users</li><li><strong>Total Requests</strong>: All requests across users</li><li><strong>Blocked Requests</strong>: Security violations blocked</li><li><strong>Most Active Users</strong>: Table of users with highest request counts</li></ul></li></ol><p><img src="'+i+'" alt="User Activity Dashboard"></p><h3 id="user-attribution" tabindex="-1">User Attribution <a class="header-anchor" href="#user-attribution" aria-label="Permalink to &quot;User Attribution&quot;">​</a></h3><p>User activity is tracked for both OAuth and API key users:</p><p><strong>OAuth Users</strong>: When OAuth is enabled on proxies, requests are attributed to the authenticated user&#39;s identity (email/username) from the OAuth provider.</p><p><strong>API Key Users</strong>: Requests made with API keys are attributed to the user group and API key owner.</p><h3 id="viewing-user-details" tabindex="-1">Viewing User Details <a class="header-anchor" href="#viewing-user-details" aria-label="Permalink to &quot;Viewing User Details&quot;">​</a></h3><p>Click the &quot;View&quot; button next to any user in the activity table to see:</p><ul><li>User information (identity, email, request counts)</li><li>Recent audit log entries for that user</li><li>Request details (proxy, method, status, duration)</li><li>Risk scores and security events</li></ul><h2 id="oauth-proxy-management" tabindex="-1">OAuth Proxy Management <a class="header-anchor" href="#oauth-proxy-management" aria-label="Permalink to &quot;OAuth Proxy Management&quot;">​</a></h2><h3 id="viewing-oauth-clients" tabindex="-1">Viewing OAuth Clients <a class="header-anchor" href="#viewing-oauth-clients" aria-label="Permalink to &quot;Viewing OAuth Clients&quot;">​</a></h3><p>To view OAuth proxy clients and user sessions:</p><ol><li>Navigate to <strong>Access &amp; Identity</strong> → <strong>OAuth Proxy</strong></li><li>Find proxies with OAuth enabled</li><li>Click <strong>View Clients</strong> button on any OAuth-enabled proxy</li><li>A modal opens showing registered OAuth proxy clients</li></ol><p>This displays active OAuth client registrations and their status for each proxy.</p><p><img src="'+o+'" alt="User Activity OAuth"></p><h3 id="authentication-logs" tabindex="-1">Authentication Logs <a class="header-anchor" href="#authentication-logs" aria-label="Permalink to &quot;Authentication Logs&quot;">​</a></h3><p>Authentication events are captured in the audit logs. See the <a href="#audit-logs">Audit Logs</a> section below for accessing detailed login/logout information.</p><hr><h2 id="security-alerts" tabindex="-1">Security Alerts <a class="header-anchor" href="#security-alerts" aria-label="Permalink to &quot;Security Alerts&quot;">​</a></h2><h3 id="viewing-security-violations" tabindex="-1">Viewing Security Violations <a class="header-anchor" href="#viewing-security-violations" aria-label="Permalink to &quot;Viewing Security Violations&quot;">​</a></h3><p>To monitor security policy violations and blocked requests by user:</p><ol><li>Navigate to <strong>Security</strong> → <strong>Alerts</strong></li><li>Use the filters to narrow down alerts: <ul><li><strong>User</strong>: Filter by specific user</li><li><strong>Severity</strong>: Low, Medium, High, Critical</li><li><strong>Status</strong>: New, Under Review, Resolved, Dismissed</li><li><strong>Date Range</strong>: Custom time period</li></ul></li><li>View alert details: <ul><li>Alert description and evidence</li><li>Policy that triggered the alert</li><li>User identity (OAuth or API key)</li><li>Request details and payload (sanitized)</li><li>Recommended response action</li></ul></li></ol><p><img src="'+n+'" alt="Security Violations"></p><h3 id="security-event-types" tabindex="-1">Security Event Types <a class="header-anchor" href="#security-event-types" aria-label="Permalink to &quot;Security Event Types&quot;">​</a></h3><p>The system tracks these user-related security events:</p><ul><li><strong>Injection Attempts</strong>: SQL injection, command injection, prompt injection</li><li><strong>Policy Violations</strong>: Requests blocked by security policies</li><li><strong>Rate Limit Exceeded</strong>: Users hitting configured rate limits</li><li><strong>Unauthorized Access</strong>: Attempts to access forbidden proxies or tools</li><li><strong>Suspicious Patterns</strong>: Anomalous behavior detection</li></ul><hr><h2 id="audit-logs" tabindex="-1">Audit Logs <a class="header-anchor" href="#audit-logs" aria-label="Permalink to &quot;Audit Logs&quot;">​</a></h2><h3 id="viewing-detailed-activity-logs" tabindex="-1">Viewing Detailed Activity Logs <a class="header-anchor" href="#viewing-detailed-activity-logs" aria-label="Permalink to &quot;Viewing Detailed Activity Logs&quot;">​</a></h3><p>For detailed user activity including MCP tool usage and LLM model requests:</p><ol><li>Navigate to <strong>Infrastructure</strong> → <strong>Audit Logs</strong></li><li>Use the tabs to view different log types: <ul><li><strong>LLM Proxy</strong>: LLM API requests with token usage</li><li><strong>MCP Proxy</strong>: MCP tool invocations and method calls</li><li><strong>Agent2Agent</strong>: A2A agent communications</li></ul></li></ol><h3 id="llm-activity-logs" tabindex="-1">LLM Activity Logs <a class="header-anchor" href="#llm-activity-logs" aria-label="Permalink to &quot;LLM Activity Logs&quot;">​</a></h3><p>The <strong>LLM Proxy</strong> tab (default view) shows:</p><ul><li>User identity for each request</li><li>Model used (GPT-4, Claude, etc.)</li><li>Token consumption (input/output)</li><li>Request duration and status</li><li>Cost attribution per user</li></ul><p><img src="'+l+'" alt="LLM Audit Logs"></p><h3 id="mcp-activity-logs" tabindex="-1">MCP Activity Logs <a class="header-anchor" href="#mcp-activity-logs" aria-label="Permalink to &quot;MCP Activity Logs&quot;">​</a></h3><p>The <strong>MCP Proxy</strong> tab shows:</p><ul><li>User identity and proxy accessed</li><li>MCP tools invoked by each user</li><li>Tool parameters and responses</li><li>Success/failure rates per user</li><li>Request timing and performance</li></ul><h3 id="filtering-audit-logs" tabindex="-1">Filtering Audit Logs <a class="header-anchor" href="#filtering-audit-logs" aria-label="Permalink to &quot;Filtering Audit Logs&quot;">​</a></h3><p>Use the available filters to focus on specific users:</p><ul><li><strong>User</strong>: Filter by specific OAuth user or API key</li><li><strong>Proxy</strong>: Limit to specific proxy instances</li><li><strong>Date Range</strong>: Custom time periods</li><li><strong>Status</strong>: Success, failed, or blocked requests</li><li><strong>Risk Level</strong>: Low, medium, high, critical risk scores</li></ul><h2 id="system-audit-logs" tabindex="-1">System Audit Logs <a class="header-anchor" href="#system-audit-logs" aria-label="Permalink to &quot;System Audit Logs&quot;">​</a></h2><h3 id="administrative-actions" tabindex="-1">Administrative Actions <a class="header-anchor" href="#administrative-actions" aria-label="Permalink to &quot;Administrative Actions&quot;">​</a></h3><p>Beyond proxy request logs, the system also tracks administrative actions in the audit logs:</p><p><strong>Event Categories</strong>:</p><ul><li><strong>Authentication</strong>: Login, logout, token refresh events</li><li><strong>Authorization</strong>: Access granted/denied, role changes</li><li><strong>Proxy Management</strong>: Proxy creation, configuration changes</li><li><strong>User Management</strong>: User creation, group assignments, API key generation</li><li><strong>Security</strong>: Alert creation/resolution, policy changes</li><li><strong>System</strong>: Configuration changes, database operations</li></ul><h3 id="viewing-system-audit-logs" tabindex="-1">Viewing System Audit Logs <a class="header-anchor" href="#viewing-system-audit-logs" aria-label="Permalink to &quot;Viewing System Audit Logs&quot;">​</a></h3><p>System-level audit logs show administrative actions rather than proxy requests. These are also accessible in <strong>Infrastructure</strong> → <strong>Audit Logs</strong> with appropriate filtering.</p><p>For detailed audit logging information, see the <a href="./audit-logging.html">Audit Logging Guide</a>.</p><h2 id="exporting-activity-data" tabindex="-1">Exporting Activity Data <a class="header-anchor" href="#exporting-activity-data" aria-label="Permalink to &quot;Exporting Activity Data&quot;">​</a></h2><h3 id="export-options" tabindex="-1">Export Options <a class="header-anchor" href="#export-options" aria-label="Permalink to &quot;Export Options&quot;">​</a></h3><p>You can export audit log data from the <strong>Infrastructure</strong> → <strong>Audit Logs</strong> view:</p><ol><li>Select the appropriate tab (LLM Proxy, MCP Proxy, or Agent2Agent)</li><li>Apply desired filters (user, date range, proxy, etc.)</li><li>Click the <strong>Export</strong> button</li><li>Choose CSV format for spreadsheet analysis</li><li>Download the filtered audit log data</li></ol><p>This provides detailed activity data for compliance, analysis, and reporting purposes.</p><hr><h2 id="best-practices" tabindex="-1">Best Practices <a class="header-anchor" href="#best-practices" aria-label="Permalink to &quot;Best Practices&quot;">​</a></h2><h3 id="security-monitoring" tabindex="-1">Security Monitoring <a class="header-anchor" href="#security-monitoring" aria-label="Permalink to &quot;Security Monitoring&quot;">​</a></h3><ol><li><strong>Regular Reviews</strong>: Check the User Activity dashboard weekly for unusual patterns</li><li><strong>Alert Monitoring</strong>: Review Security → Alerts regularly for user-related violations</li><li><strong>Access Reviews</strong>: Periodically review which users have access to which proxies</li><li><strong>Top Users</strong>: Monitor the most active users for potential abuse or issues</li></ol><h3 id="user-attribution-setup" tabindex="-1">User Attribution Setup <a class="header-anchor" href="#user-attribution-setup" aria-label="Permalink to &quot;User Attribution Setup&quot;">​</a></h3><ol><li><strong>Enable OAuth</strong>: Configure OAuth on proxies for detailed user attribution</li><li><strong>API Key Management</strong>: Ensure API keys are properly assigned to user groups</li><li><strong>User Groups</strong>: Organize users into groups for easier management and reporting</li><li><strong>Audit Logging</strong>: Keep audit logs enabled to track all user actions</li></ol><h3 id="performance-tips" tabindex="-1">Performance Tips <a class="header-anchor" href="#performance-tips" aria-label="Permalink to &quot;Performance Tips&quot;">​</a></h3><ol><li><strong>Use Filters</strong>: Apply date range and user filters to reduce data loading time</li><li><strong>Export Large Datasets</strong>: Use the export function for detailed analysis of large time periods</li><li><strong>Focus on Recent Activity</strong>: Most relevant user activity is typically within the last 7-30 days</li></ol><hr><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h2><h3 id="missing-user-attribution" tabindex="-1">Missing User Attribution <a class="header-anchor" href="#missing-user-attribution" aria-label="Permalink to &quot;Missing User Attribution&quot;">​</a></h3><p><strong>Problem</strong>: Requests show up without user identity.</p><p><strong>Solutions</strong>:</p><ol><li>Verify OAuth is enabled on the proxy: <strong>Access &amp; Identity</strong> → <strong>OAuth Proxy</strong></li><li>Check that users are using valid API keys</li><li>Ensure proxy authentication is configured correctly</li></ol><h3 id="empty-activity-dashboard" tabindex="-1">Empty Activity Dashboard <a class="header-anchor" href="#empty-activity-dashboard" aria-label="Permalink to &quot;Empty Activity Dashboard&quot;">​</a></h3><p><strong>Problem</strong>: User Activity dashboard shows no data.</p><p><strong>Solutions</strong>:</p><ol><li>Verify users are making requests to proxies with OAuth or API key authentication</li><li>Check that audit logging is enabled: <strong>Settings</strong> → <strong>System</strong> → <strong>Logging</strong></li><li>Ensure proxies are running and receiving traffic</li><li>Wait a few minutes after initial setup for data to populate</li></ol><h3 id="slow-dashboard-loading" tabindex="-1">Slow Dashboard Loading <a class="header-anchor" href="#slow-dashboard-loading" aria-label="Permalink to &quot;Slow Dashboard Loading&quot;">​</a></h3><p><strong>Problem</strong>: User Activity page takes a long time to load.</p><p><strong>Solutions</strong>:</p><ol><li>Use the date range filter to limit the data timeframe</li><li>Check system resources - large numbers of users/requests may impact performance</li><li>Focus on specific users rather than viewing all activity at once</li></ol><hr><h2 id="related-documentation" tabindex="-1">Related Documentation <a class="header-anchor" href="#related-documentation" aria-label="Permalink to &quot;Related Documentation&quot;">​</a></h2><ul><li><a href="./budget-management-guide.html">Budget Management Guide</a> - Track and control user spending</li><li><a href="./observability-user-guide.html">Observability User Guide</a> - System monitoring and metrics</li><li><a href="./../configuration/oauth-proxy-guide.html">OAuth Proxy Guide</a> - Configure OAuth authentication on proxies</li><li><a href="./../configuration/oauth-provider-guide.html">OAuth Provider Guide</a> - Set up OAuth providers</li><li><a href="./../api-usage/authentication-guide.html">Authentication Guide</a> - API key and authentication setup</li></ul>',88)])])}const v=e(u,[["render",c]]);export{b as __pageData,v as default};
