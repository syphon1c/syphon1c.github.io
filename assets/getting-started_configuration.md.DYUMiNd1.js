import{_ as i,o as a,c as n,ah as e}from"./chunks/framework.504LQ1l3.js";const c=JSON.parse('{"title":"System Configuration Reference","description":"","frontmatter":{},"headers":[],"relativePath":"getting-started/configuration.md","filePath":"getting-started/configuration.md"}'),t={name:"getting-started/configuration.md"};function l(p,s,h,o,r,k){return a(),n("div",null,[...s[0]||(s[0]=[e(`<h1 id="system-configuration-reference" tabindex="-1">System Configuration Reference <a class="header-anchor" href="#system-configuration-reference" aria-label="Permalink to &quot;System Configuration Reference&quot;">​</a></h1><p>This document provides comprehensive reference information for configuring AI Security Gateway, including all available options, their defaults, and usage examples.</p><h2 id="configuration-overview" tabindex="-1">Configuration Overview <a class="header-anchor" href="#configuration-overview" aria-label="Permalink to &quot;Configuration Overview&quot;">​</a></h2><p>AI Security Gateway uses a combination of:</p><ul><li><strong>Environment Variables</strong> - Primary configuration method (<code>.env</code> file)</li><li><strong>Database Storage</strong> - Runtime settings via web interface or API</li></ul><div class="info custom-block"><p class="custom-block-title">Its recommended to drive most of the changes and configurations from the web UI</p></div><h2 id="environment-variables-primary-configuration" tabindex="-1">Environment Variables (Primary Configuration) <a class="header-anchor" href="#environment-variables-primary-configuration" aria-label="Permalink to &quot;Environment Variables (Primary Configuration)&quot;">​</a></h2><div class="warning custom-block"><p class="custom-block-title">These are set by default during the first setup using the install.sh and start.sh helper scripts. This section of the documents are to explain the environment variables used and it will be up to you to customise further if you wish!</p></div><h3 id="configuration-required-variables" tabindex="-1">Configuration Required Variables <a class="header-anchor" href="#configuration-required-variables" aria-label="Permalink to &quot;Configuration Required Variables&quot;">​</a></h3><p>These are <strong>REQUIRED</strong> if you plan to use OAuth authentication:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># JWT Secret (minimum 32 characters)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">JWT_SECRET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">your-secure-jwt-secret-min-32-chars-long</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Session Encryption Key (exactly 32 characters)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ENCRYPTION_KEY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">your-secure-encryption-key-exactly-32-chars</span></span></code></pre></div><p>Generate secure values:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Generate JWT_SECRET</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rand</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -base64</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 32</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Generate ENCRYPTION_KEY (must be exactly 32 characters)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rand</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -base64</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 32</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> cut</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c1-32</span></span></code></pre></div><h3 id="optional-configuration-variables" tabindex="-1">Optional Configuration Variables <a class="header-anchor" href="#optional-configuration-variables" aria-label="Permalink to &quot;Optional Configuration Variables&quot;">​</a></h3><p>Configuration is organized into three categories based on how settings are managed:</p><h4 id="_1-environment-variables-direct-use" tabindex="-1">1. Environment Variables (Direct Use) <a class="header-anchor" href="#_1-environment-variables-direct-use" aria-label="Permalink to &quot;1. Environment Variables (Direct Use)&quot;">​</a></h4><p>These variables are read directly from environment variables or <code>.env</code> file:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Server Configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SERVER_PORT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">8080</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                        # Default: 8080</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Database Configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DB_PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./data/security.db</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">              # Default: ./data/ai-gateway-security.db</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># CORS Configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ENVIRONMENT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">development</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                 # Options: development, production</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ALLOWED_ORIGINS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">http://localhost:3000,http://localhost:5173</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Rate Limiting</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">RATE_LIMIT_ENABLED</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">true</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                 # Enable/disable rate limiting</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">RATE_LIMIT_RPM</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">100</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                      # Requests per minute</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">RATE_LIMIT_TPM</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">10000</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                    # Tokens per minute</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">RATE_LIMIT_BURST</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">2</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                      # Burst size multiplier</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># WebSocket Configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">WEBSOCKET_MAX_CONNECTIONS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1000</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # Max concurrent WebSocket connections</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">WEBSOCKET_READ_TIMEOUT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">60</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">               # Read timeout in seconds</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">WEBSOCKET_WRITE_TIMEOUT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">60</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">              # Write timeout in seconds</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">WEBSOCKET_PING_INTERVAL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">30</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">              # Ping interval in seconds</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">WEBSOCKET_IDLE_TIMEOUT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">300</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">              # Idle timeout in seconds</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># OAuth Session Cleanup Automation</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">OAUTH_CLEANUP_INTERVAL_SECONDS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">300</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # Cleanup interval (default: 5 minutes)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">OAUTH_HARD_DELETE_GRACE_HOURS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">24</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # Hours before archived sessions are permanently deleted</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">OAUTH_VACUUM_THRESHOLD</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1000</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">             # Hard deletes before database VACUUM</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># JWT RSA Keys (Optional - enables JWKS endpoint for external verification)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># JWT_RSA_PRIVATE_KEY_FILE=/path/to/private.pem  # Path to RSA private key</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># JWT_KEY_ID=gateway-key-v1                       # Custom key ID for rotation</span></span></code></pre></div><h4 id="_2-database-web-ui-configuration" tabindex="-1">2. Database/Web UI Configuration <a class="header-anchor" href="#_2-database-web-ui-configuration" aria-label="Permalink to &quot;2. Database/Web UI Configuration&quot;">​</a></h4><p>These settings are <strong>stored in the database</strong> and configured via the Web UI or API (not environment variables):</p><div class="warning custom-block"><p class="custom-block-title">MIGRATING FROM PREVIOUS VERSIONS</p><p>If you have <code>OAUTH_*</code> environment variables in your <code>.env</code> file from a previous version, these are <strong>no longer used</strong>. OAuth providers must be configured via the Web UI at <code>http://localhost:8080/settings</code> → OAuth Providers section.</p></div><p><strong>OAuth Provider Configuration</strong> (Web UI Only):</p><ul><li>Navigate to Settings → OAuth Providers</li><li>Add providers: GitHub, Google, Microsoft, Okta, etc.</li><li>Configure Client ID and Client Secret (encrypted at rest)</li><li>Set callback URLs and scopes</li><li>Enable/disable providers as needed</li></ul><p><strong>API Endpoints for OAuth Configuration</strong>:</p><ul><li><code>GET /api/v1/admin/oauth/providers</code> - List providers</li><li><code>POST /api/v1/admin/oauth/providers</code> - Create provider</li><li><code>PUT /api/v1/admin/oauth/providers/{id}</code> - Update provider</li><li><code>DELETE /api/v1/admin/oauth/providers/{id}</code> - Delete provider</li></ul><p><strong>System Settings</strong> (Web UI or API):</p><ul><li>General settings (system name, auto-refresh intervals)</li><li>Database retention policies</li><li>MCP tool monitoring configuration</li><li>External storage (RDS configuration)</li><li>Observability integrations (Langfuse)</li></ul><h3 id="environment-file-env" tabindex="-1">Environment File (.env) <a class="header-anchor" href="#environment-file-env" aria-label="Permalink to &quot;Environment File (.env)&quot;">​</a></h3><p>Create a <code>.env</code> file in the project root:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Copy example file</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .env.example</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .env</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Edit with your values</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .env</span></span></code></pre></div><p>Example <code>.env</code> file:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Authentication (REQUIRED for OAuth)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">JWT_SECRET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ZXhhbXBsZS1qd3Qtc2VjcmV0LW1pbi0zMi1jaGFycw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ENCRYPTION_KEY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ZXhhbXBsZS1lbmNyeXB0aW9uLWtleQ</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Server</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SERVER_PORT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">8080</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Database</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DB_PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./data/ai-gateway-security.db</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># CORS</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ENVIRONMENT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">development</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ALLOWED_ORIGINS not needed in development - auto-allows localhost and private IPs</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Rate Limiting</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">RATE_LIMIT_ENABLED</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">RATE_LIMIT_RPM</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">100</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">RATE_LIMIT_TPM</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">10000</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">RATE_LIMIT_BURST</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">2</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># WebSocket Configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">WEBSOCKET_MAX_CONNECTIONS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1000</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">WEBSOCKET_READ_TIMEOUT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">60</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">WEBSOCKET_WRITE_TIMEOUT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">60</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">WEBSOCKET_PING_INTERVAL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">30</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">WEBSOCKET_IDLE_TIMEOUT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">300</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># OAuth Session Cleanup (optional - uses sensible defaults)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># OAUTH_CLEANUP_INTERVAL_SECONDS=300      # Cleanup interval (5 minutes default)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># OAUTH_HARD_DELETE_GRACE_HOURS=24        # Grace period before permanent deletion</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># OAUTH_VACUUM_THRESHOLD=1000             # Hard deletes before VACUUM</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># OAuth Replay Detection (optional - uses sensible defaults)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># OAUTH_REFRESH_TOKEN_HASH_HISTORY_SIZE=3 # Number of token hashes for replay detection</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Optional: Integration Configuration (can also configure via Web UI)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># SLACK_WEBHOOK_URL=https://hooks.slack.com/services/T00000000/B00000000/XXXX</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># SIEM_ENDPOINT=https://your-siem-endpoint.com/api/alerts</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># SIEM_API_KEY=your-siem-api-key</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">OAuth Configuration</p><p>OAuth providers (GitHub, Google, Microsoft, Okta) are configured via Web UI at <code>http://localhost:8080/settings</code>, not environment variables. See <a href="./../configuration/oauth-setup-guide.html">OAuth Setup Guide</a> for details.</p></div><hr><h2 id="system-cors-configuration" tabindex="-1">System CORS Configuration <a class="header-anchor" href="#system-cors-configuration" aria-label="Permalink to &quot;System CORS Configuration&quot;">​</a></h2><p>AI Security Gateway supports flexible CORS (Cross-Origin Resource Sharing) configuration to balance security with usability across different environments.</p><h3 id="configuration-environment-variables" tabindex="-1">Configuration Environment Variables <a class="header-anchor" href="#configuration-environment-variables" aria-label="Permalink to &quot;Configuration Environment Variables&quot;">​</a></h3><p>Two key environment variables control CORS behavior:</p><p><strong>ENVIRONMENT</strong> - Controls the operating mode:</p><ul><li><code>development</code> or <code>dev</code> (default) - Permissive mode for local development</li><li><code>production</code> - Strict mode requiring explicit origin whitelisting</li></ul><p><strong>ALLOWED_ORIGINS</strong> - Comma-separated list of allowed origins:</p><ul><li>Example: <code>http://localhost:3000,http://localhost:5173</code></li><li>Production: <code>https://app.example.com,https://admin.example.com</code></li></ul><h3 id="development-mode-default" tabindex="-1">Development Mode (Default) <a class="header-anchor" href="#development-mode-default" aria-label="Permalink to &quot;Development Mode (Default)&quot;">​</a></h3><p>When <code>ENVIRONMENT</code> is not set, or set to <code>development</code> or <code>dev</code>:</p><p><strong>Automatically Allowed:</strong></p><ul><li>All <code>localhost</code> origins on any port (e.g., <code>http://localhost:3000</code>)</li><li>All <code>127.0.0.1</code> origins on any port (e.g., <code>http://127.0.0.1:5173</code>)</li><li>RFC 1918 private IP ranges: <ul><li><code>10.0.0.0/8</code> (10.0.0.0 - 10.255.255.255)</li><li><code>172.16.0.0/12</code> (172.16.0.0 - 172.31.255.255)</li><li><code>192.168.0.0/16</code> (192.168.0.0 - 192.168.255.255)</li></ul></li></ul><p><strong>Default Ports:</strong></p><ul><li><code>http://localhost:8080</code> - Main API server</li><li><code>http://localhost:3000</code> - Common frontend dev port</li><li><code>http://localhost:5173</code> - Vite dev server default</li></ul><p><strong>Use Case:</strong> Local development and LAN testing without hardcoding IP addresses.</p><h3 id="production-mode" tabindex="-1">Production Mode <a class="header-anchor" href="#production-mode" aria-label="Permalink to &quot;Production Mode&quot;">​</a></h3><p>When <code>ENVIRONMENT</code> is set to <code>production</code>:</p><p><strong>Requirements:</strong></p><ul><li>MUST set <code>ALLOWED_ORIGINS</code> with explicit domain list</li><li>ONLY listed origins are allowed</li><li>No automatic localhost or private IP allowance</li><li>Recommended to use HTTPS for production domains</li></ul><p><strong>Example:</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ENVIRONMENT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">production</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ALLOWED_ORIGINS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://app.example.com,https://admin.example.com&quot;</span></span></code></pre></div><h3 id="basic-configuration-examples" tabindex="-1">Basic Configuration Examples <a class="header-anchor" href="#basic-configuration-examples" aria-label="Permalink to &quot;Basic Configuration Examples&quot;">​</a></h3><h4 id="local-development-no-configuration" tabindex="-1">Local Development (No Configuration) <a class="header-anchor" href="#local-development-no-configuration" aria-label="Permalink to &quot;Local Development (No Configuration)&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># No environment variables needed - uses defaults</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./build/unified-admin</span></span></code></pre></div><p>Allows:</p><ul><li><code>http://localhost:*</code> (any port)</li><li><code>http://127.0.0.1:*</code> (any port)</li><li>Default ports: 3000, 5173, 8080</li></ul><h4 id="lan-internal-network-testing" tabindex="-1">LAN/Internal Network Testing <a class="header-anchor" href="#lan-internal-network-testing" aria-label="Permalink to &quot;LAN/Internal Network Testing&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ENVIRONMENT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">development</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./build/unified-admin</span></span></code></pre></div><p>Allows:</p><ul><li>All localhost origins</li><li>All RFC 1918 private IPs (e.g., <code>http://192.168.1.100:3000</code>)</li></ul><h4 id="staging-environment" tabindex="-1">Staging Environment <a class="header-anchor" href="#staging-environment" aria-label="Permalink to &quot;Staging Environment&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ENVIRONMENT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">production</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ALLOWED_ORIGINS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://staging.example.com&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./build/unified-admin</span></span></code></pre></div><p>Allows:</p><ul><li>ONLY <code>https://staging.example.com</code></li></ul><h4 id="configuration-production-environment" tabindex="-1">Configuration Production Environment <a class="header-anchor" href="#configuration-production-environment" aria-label="Permalink to &quot;Configuration Production Environment&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ENVIRONMENT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">production</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ALLOWED_ORIGINS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://app.example.com,https://admin.example.com&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./build/unified-admin</span></span></code></pre></div><p>Allows:</p><ul><li>ONLY <code>https://app.example.com</code></li><li>ONLY <code>https://admin.example.com</code></li></ul><h3 id="configuration-security-features" tabindex="-1">Configuration Security Features <a class="header-anchor" href="#configuration-security-features" aria-label="Permalink to &quot;Configuration Security Features&quot;">​</a></h3><p><strong>Development Mode:</strong></p><ul><li>Automatic localhost support (no hardcoded ports)</li><li>Private network IP support for LAN access</li><li>Rejects public IP addresses (e.g., <code>8.8.8.8</code>)</li><li>Rejects malicious domains (e.g., <code>evil.com</code>)</li></ul><p><strong>Production Mode:</strong></p><ul><li>Explicit whitelist validation only</li><li>No wildcard origins</li><li>No automatic allowances</li><li>Enforces HTTPS for production</li></ul><p><strong>All Modes:</strong></p><ul><li>Never uses <code>Access-Control-Allow-Origin: *</code> with credentials</li><li>Proper origin validation before setting CORS headers</li><li>Logging of rejected origins for security monitoring</li><li>Preflight request caching (1 hour)</li></ul><h3 id="testing-cors-configuration" tabindex="-1">Testing CORS Configuration <a class="header-anchor" href="#testing-cors-configuration" aria-label="Permalink to &quot;Testing CORS Configuration&quot;">​</a></h3><p><strong>Test Valid Origin:</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Origin: http://localhost:3000&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:8080/api/v1/health</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Should include: Access-Control-Allow-Origin: http://localhost:3000</span></span></code></pre></div><p><strong>Test LAN Origin (Development Mode):</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ENVIRONMENT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">development</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Origin: http://192.168.1.100:3000&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:8080/api/v1/health</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Should include: Access-Control-Allow-Origin: http://192.168.1.100:3000</span></span></code></pre></div><p><strong>Test Rejected Origin:</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Origin: https://evil.com&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:8080/api/v1/health</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Should NOT include Access-Control-Allow-Origin header</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Check logs for: &quot;CORS: Rejected origin: https://evil.com&quot;</span></span></code></pre></div><h3 id="environment-variable-configuration" tabindex="-1">Environment Variable Configuration <a class="header-anchor" href="#environment-variable-configuration" aria-label="Permalink to &quot;Environment Variable Configuration&quot;">​</a></h3><p>Add to your <code>.env</code> file:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Development mode (default)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ENVIRONMENT=development</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Production mode</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ENVIRONMENT=production</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ALLOWED_ORIGINS=https://app.example.com,https://admin.example.com</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Custom origins for development</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173,http://192.168.1.100:3000</span></span></code></pre></div><h3 id="configuration-troubleshooting" tabindex="-1">Configuration Troubleshooting <a class="header-anchor" href="#configuration-troubleshooting" aria-label="Permalink to &quot;Configuration Troubleshooting&quot;">​</a></h3><p><strong>Issue: Frontend can&#39;t connect to API</strong></p><ul><li>Check browser console for CORS errors</li><li>Verify <code>Origin</code> header in request matches allowed list</li><li>Check server logs for &quot;CORS: Rejected origin&quot; messages</li><li>Ensure <code>ENVIRONMENT</code> is set correctly</li></ul><p><strong>Issue: LAN access not working</strong></p><ul><li>Verify <code>ENVIRONMENT=development</code> is set</li><li>Confirm IP is in RFC 1918 range (10.x, 172.16-31.x, 192.168.x)</li><li>Check firewall rules on server</li><li>Test with curl to isolate CORS vs network issues</li></ul><p><strong>Issue: Production CORS not working</strong></p><ul><li>Ensure <code>ALLOWED_ORIGINS</code> includes exact domain (including protocol)</li><li>Verify using HTTPS in production</li><li>Check for trailing slashes or port mismatches</li><li>Confirm environment variable is loaded (check logs)</li></ul><h3 id="migration-from-previous-versions" tabindex="-1">Migration from Previous Versions <a class="header-anchor" href="#migration-from-previous-versions" aria-label="Permalink to &quot;Migration from Previous Versions&quot;">​</a></h3><p>If upgrading from a version with hardcoded origins:</p><ol><li><strong>No action required</strong> for development environments - defaults will work</li><li><strong>Set <code>ALLOWED_ORIGINS</code></strong> in production with your specific domains</li><li><strong>Review logs</strong> for any rejected origins after deployment</li><li><strong>Test thoroughly</strong> in staging before production rollout</li></ol><h3 id="configuration-development-environment" tabindex="-1">Configuration Development Environment <a class="header-anchor" href="#configuration-development-environment" aria-label="Permalink to &quot;Configuration Development Environment&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># .env file for development</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">JWT_SECRET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">dev-jwt-secret-min-32-characters-long</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ENCRYPTION_KEY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">dev-encryption-key-32chars!!!</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ENVIRONMENT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">development</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ALLOWED_ORIGINS not needed - automatically allows localhost and private IPs</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SERVER_PORT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">8080</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DB_PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./data/ai-gateway-security.db</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Rate Limiting (relaxed for development)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">RATE_LIMIT_ENABLED</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">RATE_LIMIT_RPM</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">500</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">RATE_LIMIT_TPM</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">50000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># WebSocket Configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">WEBSOCKET_MAX_CONNECTIONS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">100</span></span></code></pre></div>`,101)])])}const g=i(t,[["render",l]]);export{c as __pageData,g as default};
