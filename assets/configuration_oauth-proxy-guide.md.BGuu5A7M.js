import{_ as t,o as a,c as i,ah as s}from"./chunks/framework.504LQ1l3.js";const o="/assets/oauth-proxy-list.DS5S6-eh.png",n="/assets/oauth-proxy-gateway-enabled.DDW6Xf8g.png",k=JSON.parse('{"title":"OAuth Proxy Guide","description":"","frontmatter":{},"headers":[],"relativePath":"configuration/oauth-proxy-guide.md","filePath":"configuration/oauth-proxy-guide.md"}'),r={name:"configuration/oauth-proxy-guide.md"};function l(h,e,u,p,d,c){return a(),i("div",null,[...e[0]||(e[0]=[s('<h1 id="oauth-proxy-guide" tabindex="-1">OAuth Proxy Guide <a class="header-anchor" href="#oauth-proxy-guide" aria-label="Permalink to &quot;OAuth Proxy Guide&quot;">​</a></h1><p>This guide shows how to enable OAuth authentication on your MCP and LLM proxies using the OAuth Proxy feature.</p><p><img src="'+o+'" alt="OAuth Proxy Dashboard"></p><h2 id="what-is-oauth-proxy" tabindex="-1">What is OAuth Proxy? <a class="header-anchor" href="#what-is-oauth-proxy" aria-label="Permalink to &quot;What is OAuth Proxy?&quot;">​</a></h2><p>OAuth Proxy adds user authentication to your proxies, ensuring that only authorized users can access MCP tools or LLM services. When enabled:</p><ul><li>Users must authenticate through an OAuth provider before accessing the proxy</li><li>MCP clients automatically handle token exchange through Dynamic Client Registration (DCR)</li><li>User permissions can be configured per proxy and per tool</li><li>All requests are audited with user identity</li></ul><h2 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to &quot;Prerequisites&quot;">​</a></h2><ul><li>OAuth provider configured (see <a href="./oauth-provider-guide.html">OAuth Provider Setup Guide</a>)</li><li>At least one proxy created (MCP or LLM)</li><li>Admin access to the web interface</li></ul><h2 id="step-1-choose-proxy-mode" tabindex="-1">Step 1: Choose Proxy Mode <a class="header-anchor" href="#step-1-choose-proxy-mode" aria-label="Permalink to &quot;Step 1: Choose Proxy Mode&quot;">​</a></h2><p>The Gateway supports two OAuth proxy modes:</p><h3 id="gateway-mode-recommended" tabindex="-1">Gateway Mode (Recommended) <a class="header-anchor" href="#gateway-mode-recommended" aria-label="Permalink to &quot;Gateway Mode (Recommended)&quot;">​</a></h3><p>The Gateway handles all OAuth authentication before forwarding requests to your MCP/LLM server.</p><p><strong>When to use</strong>:</p><ul><li>Your MCP/LLM server doesn&#39;t support OAuth</li><li>You want centralized user authentication</li><li>You need user-level audit trails</li><li>Most common use case</li></ul><p><strong>Flow</strong>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>User → Gateway (OAuth check) → MCP/LLM Server</span></span></code></pre></div><h3 id="upstream-mode" tabindex="-1">Upstream Mode <a class="header-anchor" href="#upstream-mode" aria-label="Permalink to &quot;Upstream Mode&quot;">​</a></h3><p>The Gateway forwards OAuth tokens to your MCP/LLM server for validation.</p><p><strong>When to use</strong>:</p><ul><li>Your MCP/LLM server has its own OAuth implementation</li><li>You want the server to make authorization decisions</li><li>Less common, advanced use case</li></ul><p><strong>Flow</strong>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>User → Gateway (pass token) → MCP/LLM Server (OAuth check)</span></span></code></pre></div><p><strong>For most users, use Gateway Mode.</strong></p><h2 id="step-2-enable-oauth-on-proxy" tabindex="-1">Step 2: Enable OAuth on Proxy <a class="header-anchor" href="#step-2-enable-oauth-on-proxy" aria-label="Permalink to &quot;Step 2: Enable OAuth on Proxy&quot;">​</a></h2><h3 id="using-the-web-interface" tabindex="-1">Using the Web Interface <a class="header-anchor" href="#using-the-web-interface" aria-label="Permalink to &quot;Using the Web Interface&quot;">​</a></h3><ol><li><p>Navigate to <strong>OAuth Proxy</strong> in the sidebar</p></li><li><p>Find your proxy in the list</p></li><li><p>Click <strong>&quot;Enable OAuth&quot;</strong> button for your proxy</p></li><li><p>In the configuration form:</p><ul><li><strong>OAuth Mode</strong>: Select <strong>&quot;Gateway&quot;</strong> (recommended)</li><li><strong>Client Name</strong>: Auto-filled (proxy name)</li><li><strong>Client Type</strong>: Select <strong>&quot;confidential&quot;</strong></li><li><strong>OAuth Provider</strong>: Select your configured provider</li></ul></li><li><p>Click <strong>&quot;Save Configuration&quot;</strong></p></li><li><p>The proxy now requires OAuth authentication</p></li></ol><p><img src="'+n+`" alt="OAuth Proxy Enabled"></p><h2 id="step-3-configure-dynamic-client-registration-mcp-only" tabindex="-1">Step 3: Configure Dynamic Client Registration (MCP Only) <a class="header-anchor" href="#step-3-configure-dynamic-client-registration-mcp-only" aria-label="Permalink to &quot;Step 3: Configure Dynamic Client Registration (MCP Only)&quot;">​</a></h2><p>For MCP proxies, Dynamic Client Registration allows MCP clients to automatically obtain OAuth tokens.</p><h3 id="enable-dcr-endpoint" tabindex="-1">Enable DCR Endpoint <a class="header-anchor" href="#enable-dcr-endpoint" aria-label="Permalink to &quot;Enable DCR Endpoint&quot;">​</a></h3><ol><li>In the OAuth Proxy configuration for your MCP proxy</li><li>Ensure <strong>DCR Endpoint</strong> is enabled (enabled by default)</li><li>Note the DCR URL: <code>http://localhost:8080/oauth/dcr</code></li></ol><p>[Screenshot: DCR configuration section showing endpoint URL]</p><h3 id="mcp-client-configuration" tabindex="-1">MCP Client Configuration <a class="header-anchor" href="#mcp-client-configuration" aria-label="Permalink to &quot;MCP Client Configuration&quot;">​</a></h3><p>MCP clients (Claude Desktop, Cursor, etc.) automatically use DCR. Add to your client&#39;s configuration:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;mcpServers&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;your-mcp-server&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;url&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://localhost:8080&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;transport&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;oauth&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;clientId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;auto&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;clientSecret&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;auto&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;authorizationEndpoint&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://localhost:8080/oauth/authorize&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;tokenEndpoint&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://localhost:8080/oauth/token&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>The client will</strong>:</p><ol><li>Automatically register with the Gateway</li><li>Open browser for user authentication</li><li>Exchange authorization code for access token</li><li>Include token in all MCP requests</li></ol><h2 id="step-4-assign-user-groups-optional" tabindex="-1">Step 4: Assign User Groups (Optional) <a class="header-anchor" href="#step-4-assign-user-groups-optional" aria-label="Permalink to &quot;Step 4: Assign User Groups (Optional)&quot;">​</a></h2><p>Control which users can access the proxy by assigning user groups:</p><ol><li>Navigate to <strong>OAuth Proxy</strong></li><li>Find your OAuth-enabled proxy</li><li>Click <strong>&quot;Manage Groups&quot;</strong></li></ol><p>[Screenshot: User Groups assignment modal]</p><ol start="4"><li>Select allowed user groups: <ul><li>Engineering Team</li><li>Data Science Team</li><li>Administrators</li></ul></li><li>Click <strong>&quot;Save&quot;</strong></li></ol><p>Now only users in selected groups can access the proxy.</p><h2 id="step-5-configure-tool-permissions-mcp-only" tabindex="-1">Step 5: Configure Tool Permissions (MCP Only) <a class="header-anchor" href="#step-5-configure-tool-permissions-mcp-only" aria-label="Permalink to &quot;Step 5: Configure Tool Permissions (MCP Only)&quot;">​</a></h2><p>For MCP proxies, you can set permissions per tool:</p><ol><li>Navigate to <strong>OAuth Proxy → Tool Permissions</strong></li><li>Select your MCP proxy</li><li>View discovered tools with permission toggles</li></ol><p>[Screenshot: Tool Permissions page with tool list and toggles]</p><ol start="4"><li><p>For each tool:</p><ul><li><strong>Enabled</strong>: All authorized users can use</li><li><strong>Disabled</strong>: No users can use (tool blocked)</li><li><strong>Group-Restricted</strong>: Only specific user groups</li></ul></li><li><p>Click <strong>&quot;Save Permissions&quot;</strong></p></li></ol><h2 id="step-6-monitor-oauth-sessions" tabindex="-1">Step 6: Monitor OAuth Sessions <a class="header-anchor" href="#step-6-monitor-oauth-sessions" aria-label="Permalink to &quot;Step 6: Monitor OAuth Sessions&quot;">​</a></h2><h3 id="view-active-sessions" tabindex="-1">View Active Sessions <a class="header-anchor" href="#view-active-sessions" aria-label="Permalink to &quot;View Active Sessions&quot;">​</a></h3><ol><li>Navigate to <strong>OAuth Access → OAuth Users</strong></li><li>Select a user to view: <ul><li>Active sessions per proxy</li><li>Token expiration times</li><li>Last request timestamp</li></ul></li></ol><p>[Screenshot: OAuth Users detail showing active sessions]</p><h3 id="revoke-access" tabindex="-1">Revoke Access <a class="header-anchor" href="#revoke-access" aria-label="Permalink to &quot;Revoke Access&quot;">​</a></h3><p>To revoke a user&#39;s access:</p><ol><li>Navigate to <strong>OAuth Access → OAuth Users</strong></li><li>Find the user</li><li>Click <strong>&quot;Revoke Sessions&quot;</strong></li><li>User must re-authenticate to regain access</li></ol><h2 id="testing-oauth-enabled-proxy" tabindex="-1">Testing OAuth-Enabled Proxy <a class="header-anchor" href="#testing-oauth-enabled-proxy" aria-label="Permalink to &quot;Testing OAuth-Enabled Proxy&quot;">​</a></h2><h3 id="mcp-proxy-test" tabindex="-1">MCP Proxy Test <a class="header-anchor" href="#mcp-proxy-test" aria-label="Permalink to &quot;MCP Proxy Test&quot;">​</a></h3><ol><li>Configure your MCP client with OAuth settings (Step 3)</li><li>Start the MCP client</li><li>Client opens browser for authentication</li><li>Approve access in the consent screen</li><li>Client automatically receives access token</li><li>MCP tools are now accessible</li></ol><h3 id="llm-proxy-test" tabindex="-1">LLM Proxy Test <a class="header-anchor" href="#llm-proxy-test" aria-label="Permalink to &quot;LLM Proxy Test&quot;">​</a></h3><ol><li>Make a request to the LLM proxy:<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Authorization: Bearer YOUR_TOKEN&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     http://localhost:8080/v1/chat/completions</span></span></code></pre></div></li><li>Without token: Returns <code>401 Unauthorized</code></li><li>With valid token: Request forwarded to LLM server</li></ol><h2 id="gateway-vs-upstream-mode-comparison" tabindex="-1">Gateway vs Upstream Mode Comparison <a class="header-anchor" href="#gateway-vs-upstream-mode-comparison" aria-label="Permalink to &quot;Gateway vs Upstream Mode Comparison&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Feature</th><th>Gateway Mode</th><th>Upstream Mode</th></tr></thead><tbody><tr><td>OAuth handling</td><td>Gateway validates tokens</td><td>Server validates tokens</td></tr><tr><td>MCP/LLM server requirements</td><td>No OAuth support needed</td><td>OAuth implementation required</td></tr><tr><td>User audit trails</td><td>Full audit in Gateway</td><td>Depends on server</td></tr><tr><td>Token forwarding</td><td>Not forwarded</td><td>Forwarded to server</td></tr><tr><td>Recommended for</td><td>Most users</td><td>Advanced integrations</td></tr></tbody></table><h2 id="common-configurations" tabindex="-1">Common Configurations <a class="header-anchor" href="#common-configurations" aria-label="Permalink to &quot;Common Configurations&quot;">​</a></h2><h3 id="multiple-proxies-with-same-oauth-provider" tabindex="-1">Multiple Proxies with Same OAuth Provider <a class="header-anchor" href="#multiple-proxies-with-same-oauth-provider" aria-label="Permalink to &quot;Multiple Proxies with Same OAuth Provider&quot;">​</a></h3><p>You can enable OAuth on multiple proxies using the same OAuth provider:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>GitHub OAuth Provider</span></span>
<span class="line"><span>  ├── MCP Proxy 1 (OAuth enabled)</span></span>
<span class="line"><span>  ├── MCP Proxy 2 (OAuth enabled)</span></span>
<span class="line"><span>  └── LLM Proxy 1 (OAuth enabled)</span></span></code></pre></div><p>Each proxy maintains independent user sessions and permissions.</p><h3 id="mixed-oauth-and-non-oauth-proxies" tabindex="-1">Mixed OAuth and Non-OAuth Proxies <a class="header-anchor" href="#mixed-oauth-and-non-oauth-proxies" aria-label="Permalink to &quot;Mixed OAuth and Non-OAuth Proxies&quot;">​</a></h3><p>You can run OAuth-enabled and non-OAuth proxies simultaneously:</p><ul><li><strong>Public Proxy</strong>: No OAuth (open access)</li><li><strong>Protected Proxy</strong>: OAuth required (user authentication)</li></ul><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h2><p><strong>MCP client fails to authenticate</strong>:</p><ul><li>Verify DCR endpoint is enabled</li><li>Check OAuth provider is configured and active</li><li>Review Gateway logs for specific error</li></ul><p><strong>User can&#39;t access proxy after authentication</strong>:</p><ul><li>Verify user is assigned to allowed user groups</li><li>Check tool permissions (MCP only)</li><li>Ensure proxy OAuth configuration is saved</li></ul><p><strong>Token expired errors</strong>:</p><ul><li>Tokens automatically refresh for MCP clients</li><li>For API access, request a new token through OAuth flow</li></ul><p>For detailed technical information, see the <a href="./../../technical/development/oauth-proxy-architecture.html">OAuth Proxy Technical Documentation</a>.</p><h2 id="next-steps" tabindex="-1">Next Steps <a class="header-anchor" href="#next-steps" aria-label="Permalink to &quot;Next Steps&quot;">​</a></h2><h3 id="advanced-user-management" tabindex="-1">Advanced User Management <a class="header-anchor" href="#advanced-user-management" aria-label="Permalink to &quot;Advanced User Management&quot;">​</a></h3><ul><li><a href="./user-group-management.html">User Group Management</a> - Create and manage user groups</li><li><a href="./group-rules-guide.html">Group Rules</a> - Automate user assignments</li></ul><h3 id="integration" tabindex="-1">Integration <a class="header-anchor" href="#integration" aria-label="Permalink to &quot;Integration&quot;">​</a></h3><ul><li><a href="./../integration/siem-integration-guide.html">SIEM Integration</a> - Send OAuth audit events to SIEM</li><li><a href="./../api/api-authentication-guide.html">API Access</a> - Programmatic OAuth token management</li></ul><h2 id="related-guides" tabindex="-1">Related Guides <a class="header-anchor" href="#related-guides" aria-label="Permalink to &quot;Related Guides&quot;">​</a></h2><ul><li><a href="./oauth-provider-guide.html">OAuth Provider Setup Guide</a> - Configure OAuth providers</li><li><a href="./../getting-started/multi-proxy-guide.html">Multi-Proxy Management</a> - Managing multiple proxies</li></ul><h2 id="security-notes" tabindex="-1">Security Notes <a class="header-anchor" href="#security-notes" aria-label="Permalink to &quot;Security Notes&quot;">​</a></h2><ul><li>All OAuth flows use PKCE for enhanced security</li><li>Tokens are encrypted in transit and at rest</li><li>Session tokens expire automatically (configurable)</li><li>User access can be revoked instantly</li></ul><p><strong>Note</strong>: The Gateway handles encryption and token management transparently - no manual configuration required.</p>`,88)])])}const m=t(r,[["render",l]]);export{k as __pageData,m as default};
