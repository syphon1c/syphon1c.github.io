import{_ as a,o as s,c as i,ah as e}from"./chunks/framework.504LQ1l3.js";const n="/assets/guardrails-endpoint-01.Bym6cOZf.png",r="/assets/guardrails-new-test-01.D31Ib52k.png",o="/assets/guardrails-report-01.DXyk4F4p.png",y=JSON.parse('{"title":"Guardrails Evaluation","description":"","frontmatter":{},"headers":[],"relativePath":"features/guardrails-evaluation-guide.md","filePath":"features/guardrails-evaluation-guide.md"}'),l={name:"features/guardrails-evaluation-guide.md"};function h(d,t,p,u,c,k){return s(),i("div",null,[...t[0]||(t[0]=[e('<h1 id="guardrails-evaluation" tabindex="-1">Guardrails Evaluation <a class="header-anchor" href="#guardrails-evaluation" aria-label="Permalink to &quot;Guardrails Evaluation&quot;">​</a></h1><h2 id="what-are-guardrails-evaluations" tabindex="-1">What Are Guardrails Evaluations? <a class="header-anchor" href="#what-are-guardrails-evaluations" aria-label="Permalink to &quot;What Are Guardrails Evaluations?&quot;">​</a></h2><p>Guardrails Evaluation is a security testing framework built into the AI Security Gateway that validates whether your AI/LLM guardrails are actually working. Think of it as automated penetration testing for your AI safety controls.</p><p>Modern AI deployments use guardrails, content filters, prompt injection detectors, output validators, to prevent misuse. But how do you know they&#39;re effective? Guardrails Evaluation answers this by running 71 built-in security test cases against your endpoints and scoring the results against the <strong>OWASP LLM Top 10</strong> and <strong>NIST AI Risk Management Framework</strong>.</p><div class="tip custom-block"><p class="custom-block-title">Why This Matters</p><p>Research shows 43% of community MCP servers have exploitable vulnerabilities. The s1ngularity NPM/NX supply chain attack of 2025 demonstrated how AI agents can be weaponized. Regular guardrails testing ensures your defenses keep pace with evolving threats.</p></div><h3 id="the-guardrails-problem-it-solves" tabindex="-1">The Guardrails Problem It Solves <a class="header-anchor" href="#the-guardrails-problem-it-solves" aria-label="Permalink to &quot;The Guardrails Problem It Solves&quot;">​</a></h3><ul><li><strong>No visibility</strong> into whether your guardrails actually block attacks</li><li><strong>Compliance gaps</strong> — need to demonstrate OWASP/NIST coverage</li><li><strong>False confidence</strong> — guardrails may silently fail on novel attack patterns</li><li><strong>Manual testing</strong> doesn&#39;t scale across multiple endpoints and attack categories</li><li><strong>No baseline</strong> to measure guardrail improvement over time</li></ul><h2 id="guardrails-evaluation-key-concepts" tabindex="-1">Guardrails Evaluation Key Concepts <a class="header-anchor" href="#guardrails-evaluation-key-concepts" aria-label="Permalink to &quot;Guardrails Evaluation Key Concepts&quot;">​</a></h2><h3 id="endpoints" tabindex="-1">Endpoints <a class="header-anchor" href="#endpoints" aria-label="Permalink to &quot;Endpoints&quot;">​</a></h3><p>An endpoint is a saved API configuration pointing to the service you want to test. This can be any web API leveraging an LLM or chatbot, not just standard providers like OpenAI or Anthropic. You configure the URL, authentication, request format, and response handling.</p><h3 id="test-cases" tabindex="-1">Test Cases <a class="header-anchor" href="#test-cases" aria-label="Permalink to &quot;Test Cases&quot;">​</a></h3><p>Individual security tests, each with a specific attack prompt, expected result (block/allow/redact/alert), and compliance mappings. The Gateway ships with 71 built-in tests across 12 attack categories. You can also create custom tests.</p><h3 id="evaluations" tabindex="-1">Evaluations <a class="header-anchor" href="#evaluations" aria-label="Permalink to &quot;Evaluations&quot;">​</a></h3><p>A &quot;scan&quot; is a single run of selected test cases against an endpoint. Evaluations run asynchronously and report progress in real-time. Each produces risk scores and per-test results.</p><h3 id="attack-categories" tabindex="-1">Attack Categories <a class="header-anchor" href="#attack-categories" aria-label="Permalink to &quot;Attack Categories&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Category</th><th>Tests</th><th>Description</th></tr></thead><tbody><tr><td>AI-Amplified Attacks</td><td>4</td><td>AI-amplified supply chain attacks, credential exfiltration, and reconnaissance</td></tr><tr><td>MCP Security &amp; Tool Poisoning</td><td>8</td><td>MCP tool poisoning, command injection, and protocol exploitation</td></tr><tr><td>Bypass Techniques</td><td>22</td><td>Security flag manipulation, obfuscation, and encoding-based bypass techniques</td></tr><tr><td>Prompt Injection</td><td>7</td><td>Direct prompt injection, goal hijacking, and system prompt extraction</td></tr><tr><td>Data Exfiltration</td><td>4</td><td>PII extraction, credential theft, and proprietary data exfiltration</td></tr><tr><td>Multi-Turn Escalation</td><td>3</td><td>Crescendo, echo chamber, and many-shot in-context override attacks</td></tr><tr><td>Semantic &amp; Structural Evasion</td><td>5</td><td>Skeleton key, roleplay, payload splitting, and multilingual evasion</td></tr><tr><td>Harmful Content &amp; Toxicity</td><td>5</td><td>Requests to generate violent, self-harm, weapons, or other harmful content</td></tr><tr><td>Misinformation &amp; Disinformation</td><td>4</td><td>Requests to generate fake news, misleading posts, or disinformation</td></tr><tr><td>PII &amp; Personal Data Extraction</td><td>3</td><td>Attempts to extract personal identifiable information about real individuals</td></tr><tr><td>Resource Exhaustion &amp; DoS</td><td>3</td><td>Prompts designed to cause infinite loops, excessive output, or resource exhaustion</td></tr><tr><td>Benign Controls</td><td>8</td><td>Legitimate requests that should NOT be blocked (false positive testing)</td></tr></tbody></table><h3 id="compliance-scoring" tabindex="-1">Compliance Scoring <a class="header-anchor" href="#compliance-scoring" aria-label="Permalink to &quot;Compliance Scoring&quot;">​</a></h3><p><strong>OWASP LLM Top 10 (2025)</strong>: Each test maps to one or more OWASP items (LLM01 through LLM10). Your score shows coverage and pass rate across the OWASP framework.</p><p><strong>NIST AI Risk Management Framework</strong>: Tests map to NIST AI RMF functions (GOVERN, MAP, MEASURE, MANAGE). Your score shows alignment with federal AI risk management requirements.</p><h2 id="getting-started-with-guardrails-testing" tabindex="-1">Getting Started with Guardrails Testing <a class="header-anchor" href="#getting-started-with-guardrails-testing" aria-label="Permalink to &quot;Getting Started with Guardrails Testing&quot;">​</a></h2><h3 id="step-1-configure-an-endpoint" tabindex="-1">Step 1: Configure an Endpoint <a class="header-anchor" href="#step-1-configure-an-endpoint" aria-label="Permalink to &quot;Step 1: Configure an Endpoint&quot;">​</a></h3><p>Navigate to <strong>Guardrails Eval</strong> in the Security section of the sidebar, then click the <strong>Endpoints</strong> tab.</p><p>Click <strong>Add Endpoint</strong> and configure:</p><ol><li><strong>Name</strong>: A descriptive label (e.g., &quot;Production OpenAI with Guardrails&quot;)</li><li><strong>URL</strong>: The base URL of your API (e.g., <code>https://api.openai.com</code>)</li><li><strong>Endpoint Path</strong>: The API path (default: <code>/v1/chat/completions</code>)</li><li><strong>HTTP Method</strong>: Usually <code>POST</code></li><li><strong>Authentication</strong>: Choose Bearer token, API Key, Custom headers, or None</li><li><strong>Request Format</strong>: <ul><li><strong>Chat Completion</strong> — Standard OpenAI-compatible format (recommended for most LLMs)</li><li><strong>Custom</strong> — Provide a JSON template with <code>{prompt}</code> placeholder for non-standard APIs</li><li><strong>Guardrails</strong> — Simple <code>{&quot;prompt&quot;: &quot;...&quot;}</code> format for dedicated guardrail services</li></ul></li></ol><div class="tip custom-block"><p class="custom-block-title">Quick Setup with Curl Import</p><p>You can paste a curl command into the <strong>Import from Curl</strong> field and click <strong>Parse</strong>. The Gateway will automatically extract the URL, headers, authentication, and payload template.</p></div><p><img src="'+n+'" alt="Add Endpoint"></p><h4 id="custom-payload-template-example" tabindex="-1">Custom Payload Template Example <a class="header-anchor" href="#custom-payload-template-example" aria-label="Permalink to &quot;Custom Payload Template Example&quot;">​</a></h4><p>For APIs that don&#39;t follow the OpenAI format, use a custom template:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{prompt}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;options&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;model&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gpt-4&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;max_tokens&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}}</span></span></code></pre></div><p>The <code>{prompt}</code> placeholder is replaced with each test case&#39;s prompt. The Gateway handles JSON escaping automatically — prompts with newlines, quotes, and special characters work correctly.</p><h3 id="step-2-test-the-connection" tabindex="-1">Step 2: Test the Connection <a class="header-anchor" href="#step-2-test-the-connection" aria-label="Permalink to &quot;Step 2: Test the Connection&quot;">​</a></h3><p>Click the <strong>Test</strong> button on your endpoint row. This sends a benign &quot;Hello&quot; prompt and reports:</p><ul><li>HTTP status code</li><li>Response latency in milliseconds</li><li>Whether the endpoint is reachable</li></ul><h3 id="step-3-run-an-evaluation" tabindex="-1">Step 3: Run an Evaluation <a class="header-anchor" href="#step-3-run-an-evaluation" aria-label="Permalink to &quot;Step 3: Run an Evaluation&quot;">​</a></h3><p>Click the <strong>Evaluations</strong> tab, then <strong>New Evaluation</strong>.</p><p><img src="'+r+'" alt="Run Evaluation"></p><p>The wizard has three steps:</p><ol><li><strong>Name &amp; Endpoint</strong>: Give your evaluation a name and select the endpoint to test</li><li><strong>Test Selection</strong>: Choose categories to include, or leave empty to run all enabled tests</li><li><strong>Configuration</strong>: Set concurrency (1-10 parallel tests) and delay between tests (100-2000ms)</li></ol><p>Click <strong>Start Evaluation</strong>. Progress updates in real-time via the progress bar.</p><div class="warning custom-block"><p class="custom-block-title">Rate Limiting</p><p>If your API has rate limits, set concurrency to 1-2 and increase the delay. Running too many tests in parallel may trigger rate limiting and cause test failures.</p></div><h3 id="step-4-review-results" tabindex="-1">Step 4: Review Results <a class="header-anchor" href="#step-4-review-results" aria-label="Permalink to &quot;Step 4: Review Results&quot;">​</a></h3><p>Click <strong>View Results</strong> on a completed evaluation to see:</p><ul><li><strong>Risk Overview</strong>: Average risk score (0-100, lower is better), OWASP score, NIST score</li><li><strong>Category Breakdown</strong>: Per-category pass rates and risk scores</li><li><strong>Results Table</strong>: Individual test results with status, response time, detection type</li></ul><p><img src="'+o+`" alt="Report"></p><h2 id="understanding-guardrails-evaluation-results" tabindex="-1">Understanding Guardrails Evaluation Results <a class="header-anchor" href="#understanding-guardrails-evaluation-results" aria-label="Permalink to &quot;Understanding Guardrails Evaluation Results&quot;">​</a></h2><h3 id="risk-score-interpretation" tabindex="-1">Risk Score Interpretation <a class="header-anchor" href="#risk-score-interpretation" aria-label="Permalink to &quot;Risk Score Interpretation&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Score Range</th><th>Rating</th><th>Meaning</th></tr></thead><tbody><tr><td>0-20</td><td>Excellent</td><td>Guardrails are highly effective</td></tr><tr><td>21-40</td><td>Good</td><td>Most attacks blocked, some gaps</td></tr><tr><td>41-60</td><td>Moderate</td><td>Significant gaps in coverage</td></tr><tr><td>61-80</td><td>Poor</td><td>Many attacks pass through</td></tr><tr><td>81-100</td><td>Critical</td><td>Guardrails are largely ineffective</td></tr></tbody></table><h3 id="test-result-statuses" tabindex="-1">Test Result Statuses <a class="header-anchor" href="#test-result-statuses" aria-label="Permalink to &quot;Test Result Statuses&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Status</th><th>Meaning</th></tr></thead><tbody><tr><td><strong>Passed</strong></td><td>Test result matched expected outcome (guardrail worked correctly)</td></tr><tr><td><strong>Failed</strong></td><td>Test result didn&#39;t match — guardrail missed or false positive</td></tr><tr><td><strong>Error</strong></td><td>Test couldn&#39;t execute (connection issue, timeout, payload error)</td></tr></tbody></table><h3 id="detection-types" tabindex="-1">Detection Types <a class="header-anchor" href="#detection-types" aria-label="Permalink to &quot;Detection Types&quot;">​</a></h3><p>When a guardrail blocks a request, the Gateway identifies how it was blocked:</p><table tabindex="0"><thead><tr><th>Detection Type</th><th>Description</th></tr></thead><tbody><tr><td><code>refusal_detected</code></td><td>LLM responded with a polite refusal (HTTP 200)</td></tr><tr><td><code>content_filter</code></td><td>Explicit content filter triggered (finish_reason)</td></tr><tr><td><code>guardrail_blocked</code></td><td>Guardrail API returned explicit block</td></tr><tr><td><code>content_blocked</code></td><td>Response contained block indicators</td></tr><tr><td><code>prompt_injection</code></td><td>Specific prompt injection detection</td></tr></tbody></table><h2 id="managing-false-positives" tabindex="-1">Managing False Positives <a class="header-anchor" href="#managing-false-positives" aria-label="Permalink to &quot;Managing False Positives&quot;">​</a></h2><p>Sometimes a guardrail correctly blocks a request, but the test was designed to expect &quot;allow&quot; (benign control tests), or vice versa. You can mark results as <strong>false positives</strong> to exclude them from scoring.</p><h3 id="marking-a-false-positive" tabindex="-1">Marking a False Positive <a class="header-anchor" href="#marking-a-false-positive" aria-label="Permalink to &quot;Marking a False Positive&quot;">​</a></h3><ol><li>Click on a result row to expand it</li><li>Click the <strong>False Positive</strong> toggle</li><li>Enter notes explaining why (required)</li><li>Click <strong>Save</strong></li></ol><p>The evaluation&#39;s risk scores recalculate immediately. False positives are treated as &quot;passed&quot; in all score calculations.</p><div class="tip custom-block"><p class="custom-block-title">When to Use False Positives</p><ul><li>Benign tests blocked by overly aggressive guardrails</li><li>Tests that fail due to endpoint-specific behavior (not a real vulnerability)</li><li>Results affected by temporary issues (rate limiting, timeouts)</li></ul></div><h2 id="creating-custom-guardrails-test-cases" tabindex="-1">Creating Custom Guardrails Test Cases <a class="header-anchor" href="#creating-custom-guardrails-test-cases" aria-label="Permalink to &quot;Creating Custom Guardrails Test Cases&quot;">​</a></h2><p>Click <strong>Test Cases</strong> tab, then <strong>Add Custom Test</strong>. Fill in:</p><ul><li><strong>Test ID</strong>: Unique identifier (e.g., &quot;CUSTOM-001&quot;)</li><li><strong>Name</strong>: Descriptive name</li><li><strong>Category</strong>: Select from existing categories</li><li><strong>Severity</strong>: Critical, High, Medium, or Low</li><li><strong>Expected Result</strong>: Block, Allow, Redact, or Alert</li><li><strong>Test Type</strong>: Single prompt or multi-turn conversation</li><li><strong>Prompt</strong>: The attack or test prompt</li></ul><p>Custom tests appear alongside built-in tests and are included in evaluations when their category is selected.</p><h2 id="guardrails-evaluation-api-reference" tabindex="-1">Guardrails Evaluation API Reference <a class="header-anchor" href="#guardrails-evaluation-api-reference" aria-label="Permalink to &quot;Guardrails Evaluation API Reference&quot;">​</a></h2><p>All endpoints are under <code>/api/v1/security/guardrails/</code> and require JWT authentication.</p><h3 id="start-an-evaluation-via-api" tabindex="-1">Start an Evaluation via API <a class="header-anchor" href="#start-an-evaluation-via-api" aria-label="Permalink to &quot;Start an Evaluation via API&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -X</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> POST</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:8080/api/v1/security/guardrails/evaluations</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Authorization: Bearer </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$JWT_TOKEN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Content-Type: application/json&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;name&quot;: &quot;Nightly Scan&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;endpoint_id&quot;: 1,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;categories&quot;: [&quot;prompt_injection&quot;, &quot;data_exfiltration&quot;],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;concurrency&quot;: 3,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;delay_ms&quot;: 200</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  }&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> jq</span></span></code></pre></div><h3 id="get-evaluation-dashboard" tabindex="-1">Get Evaluation Dashboard <a class="header-anchor" href="#get-evaluation-dashboard" aria-label="Permalink to &quot;Get Evaluation Dashboard&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:8080/api/v1/security/guardrails/evaluations/1/dashboard</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Authorization: Bearer </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$JWT_TOKEN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> jq</span></span></code></pre></div><p>Response:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;evaluation&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Nightly Scan&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;completed&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;risk_overview&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;average_risk_score&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">23.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;owasp_score&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">78.2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;nist_score&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">81.0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;category_breakdown&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;category&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;prompt_injection&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;total&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;passed&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;failed&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;risk_score&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;pass_rate&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">86.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;avg_response_ms&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">245.3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;false_positive_count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="get-evaluation-results" tabindex="-1">Get Evaluation Results <a class="header-anchor" href="#get-evaluation-results" aria-label="Permalink to &quot;Get Evaluation Results&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;http://localhost:8080/api/v1/security/guardrails/evaluations/1/results?limit=10&amp;offset=0&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Authorization: Bearer </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$JWT_TOKEN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> jq</span></span></code></pre></div><h2 id="guardrails-evaluation-best-practices" tabindex="-1">Guardrails Evaluation Best Practices <a class="header-anchor" href="#guardrails-evaluation-best-practices" aria-label="Permalink to &quot;Guardrails Evaluation Best Practices&quot;">​</a></h2><h3 id="_1-start-with-a-baseline" tabindex="-1">1. Start with a Baseline <a class="header-anchor" href="#_1-start-with-a-baseline" aria-label="Permalink to &quot;1. Start with a Baseline&quot;">​</a></h3><p>Run a full evaluation with all categories enabled before making guardrail changes. This gives you a baseline risk score to measure improvements against.</p><h3 id="_2-test-regularly" tabindex="-1">2. Test Regularly <a class="header-anchor" href="#_2-test-regularly" aria-label="Permalink to &quot;2. Test Regularly&quot;">​</a></h3><p>Schedule evaluations after any guardrail configuration change, model update, or security policy modification.</p><h3 id="_3-use-appropriate-concurrency" tabindex="-1">3. Use Appropriate Concurrency <a class="header-anchor" href="#_3-use-appropriate-concurrency" aria-label="Permalink to &quot;3. Use Appropriate Concurrency&quot;">​</a></h3><ul><li><strong>Development/testing</strong>: Concurrency 3-5, delay 200ms</li><li><strong>Production endpoints</strong>: Concurrency 1-2, delay 500-1000ms</li><li><strong>Rate-limited APIs</strong>: Concurrency 1, delay 1000-2000ms</li></ul><h3 id="_4-don-t-ignore-benign-controls" tabindex="-1">4. Don&#39;t Ignore Benign Controls <a class="header-anchor" href="#_4-don-t-ignore-benign-controls" aria-label="Permalink to &quot;4. Don&#39;t Ignore Benign Controls&quot;">​</a></h3><p>The &quot;Benign Controls&quot; category tests legitimate requests that should NOT be blocked. A high block rate on benign tests means your guardrails are too aggressive.</p><h3 id="_5-review-false-positives-carefully" tabindex="-1">5. Review False Positives Carefully <a class="header-anchor" href="#_5-review-false-positives-carefully" aria-label="Permalink to &quot;5. Review False Positives Carefully&quot;">​</a></h3><p>Before marking a result as a false positive, verify it&#39;s truly a false positive and not a real gap. Document your reasoning in the notes field.</p><h2 id="guardrails-evaluation-troubleshooting" tabindex="-1">Guardrails Evaluation Troubleshooting <a class="header-anchor" href="#guardrails-evaluation-troubleshooting" aria-label="Permalink to &quot;Guardrails Evaluation Troubleshooting&quot;">​</a></h2><h3 id="payload-template-produced-invalid-json" tabindex="-1">&quot;payload template produced invalid JSON&quot; <a class="header-anchor" href="#payload-template-produced-invalid-json" aria-label="Permalink to &quot;&quot;payload template produced invalid JSON&quot;&quot;">​</a></h3><p><strong>Cause</strong>: The custom payload template is malformed or doesn&#39;t contain <code>{prompt}</code> inside a JSON string value.</p><p><strong>Fix</strong>: Ensure your template is valid JSON with <code>{prompt}</code> as a string value:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;messages&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;role&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{prompt}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}]}</span></span></code></pre></div><h3 id="all-tests-show-error-status" tabindex="-1">All Tests Show &quot;error&quot; Status <a class="header-anchor" href="#all-tests-show-error-status" aria-label="Permalink to &quot;All Tests Show &quot;error&quot; Status&quot;">​</a></h3><p><strong>Check</strong>:</p><ol><li>Endpoint URL is correct and reachable</li><li>Authentication credentials are valid</li><li>Test the connection using the <strong>Test</strong> button</li><li>Check the Gateway server logs for detailed error messages</li></ol><h3 id="high-false-positive-rate" tabindex="-1">High False Positive Rate <a class="header-anchor" href="#high-false-positive-rate" aria-label="Permalink to &quot;High False Positive Rate&quot;">​</a></h3><p><strong>Cause</strong>: The endpoint returns generic responses (refusals, error messages) that trigger refusal detection even for benign tests.</p><p><strong>Solutions</strong>:</p><ol><li>Use the Chat Completion request format if your API supports it (more reliable detection)</li><li>Configure a custom JQ expression to extract the relevant response field</li><li>Mark genuine false positives and document the reasons</li></ol><h3 id="scores-don-t-update-after-false-positive-toggle" tabindex="-1">Scores Don&#39;t Update After False Positive Toggle <a class="header-anchor" href="#scores-don-t-update-after-false-positive-toggle" aria-label="Permalink to &quot;Scores Don&#39;t Update After False Positive Toggle&quot;">​</a></h3><p><strong>Check</strong>: Ensure the evaluation status is &quot;completed&quot;. Scores only recalculate for completed evaluations. Check the server logs for database errors.</p><h3 id="multi-turn-tests-failing-on-early-turns" tabindex="-1">Multi-Turn Tests Failing on Early Turns <a class="header-anchor" href="#multi-turn-tests-failing-on-early-turns" aria-label="Permalink to &quot;Multi-Turn Tests Failing on Early Turns&quot;">​</a></h3><p><strong>Cause</strong>: Multi-turn tests expect early turns to receive &quot;allow&quot; responses. If the endpoint blocks all requests (including benign ones), early turns fail.</p><p><strong>Solution</strong>: This is expected behaviour if the endpoint has very aggressive guardrails. Consider adjusting guardrail sensitivity for conversational contexts, or mark as false positives if appropriate.</p><h2 id="related-guardrails-documentation" tabindex="-1">Related Guardrails Documentation <a class="header-anchor" href="#related-guardrails-documentation" aria-label="Permalink to &quot;Related Guardrails Documentation&quot;">​</a></h2><ul><li><a href="./../operations/guardrails-evaluation-operations.html">Guardrails Evaluation Operations Guide</a> — Detailed operational procedures</li><li><a href="./../configuration/custom-policies-guide.html">Custom Policies Guide</a> — Configure security policies</li><li><a href="./canary-token-user-guide.html">Canary Token Detection</a> — Another security testing feature</li></ul>`,102)])])}const E=a(l,[["render",h]]);export{y as __pageData,E as default};
