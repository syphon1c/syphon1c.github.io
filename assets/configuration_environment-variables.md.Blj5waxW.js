import{_ as e,o as s,c as a,ah as n}from"./chunks/framework.504LQ1l3.js";const p=JSON.parse('{"title":"Environment Variables Configuration","description":"","frontmatter":{},"headers":[],"relativePath":"configuration/environment-variables.md","filePath":"configuration/environment-variables.md"}'),t={name:"configuration/environment-variables.md"};function o(l,i,r,c,d,h){return s(),a("div",null,[...i[0]||(i[0]=[n(`<h1 id="environment-variables-configuration" tabindex="-1">Environment Variables Configuration <a class="header-anchor" href="#environment-variables-configuration" aria-label="Permalink to &quot;Environment Variables Configuration&quot;">​</a></h1><p>This document describes all environment variables that can be used to configure the AI Security Gateway.</p><div class="danger custom-block"><p class="custom-block-title">There actually shouldnt be much reason to further customise environment variables in the .env file, defaults should work fine but we&#39;re listing here for when you want to really fine tune...you know the risks. Most things can be set under the Settings section of the UI (:</p></div><div class="info custom-block"><p class="custom-block-title">Also, side note, some environment variable listed may be removed over time</p></div><h2 id="sqlite-database-configuration" tabindex="-1">SQLite Database Configuration <a class="header-anchor" href="#sqlite-database-configuration" aria-label="Permalink to &quot;SQLite Database Configuration&quot;">​</a></h2><h3 id="db-path" tabindex="-1">DB_PATH <a class="header-anchor" href="#db-path" aria-label="Permalink to &quot;DB_PATH&quot;">​</a></h3><ul><li><strong>Description</strong>: Database file path</li><li><strong>Default</strong>: <code>./data/ai-gateway-security.db</code></li><li><strong>Example</strong>: <code>DB_PATH=/var/lib/ai-gateway/security.db</code></li></ul><h3 id="db-max-open-conns" tabindex="-1">DB_MAX_OPEN_CONNS <a class="header-anchor" href="#db-max-open-conns" aria-label="Permalink to &quot;DB_MAX_OPEN_CONNS&quot;">​</a></h3><ul><li><strong>Description</strong>: Maximum number of open database connections</li><li><strong>Default</strong>: <code>100</code> (increased from 50 for high-throughput scenarios)</li><li><strong>Example</strong>: <code>DB_MAX_OPEN_CONNS=150</code></li><li><strong>Note</strong>: Increase for high-concurrency scenarios with multiple proxies and users (2000+ req/s)</li></ul><h3 id="db-max-idle-conns" tabindex="-1">DB_MAX_IDLE_CONNS <a class="header-anchor" href="#db-max-idle-conns" aria-label="Permalink to &quot;DB_MAX_IDLE_CONNS&quot;">​</a></h3><ul><li><strong>Description</strong>: Maximum number of idle database connections</li><li><strong>Default</strong>: <code>20</code> (increased from 10 for better connection reuse)</li><li><strong>Example</strong>: <code>DB_MAX_IDLE_CONNS=30</code></li><li><strong>Note</strong>: Higher values improve connection reuse but use more memory</li></ul><h3 id="db-conn-max-lifetime" tabindex="-1">DB_CONN_MAX_LIFETIME <a class="header-anchor" href="#db-conn-max-lifetime" aria-label="Permalink to &quot;DB_CONN_MAX_LIFETIME&quot;">​</a></h3><ul><li><strong>Description</strong>: Maximum lifetime of a database connection in seconds</li><li><strong>Default</strong>: <code>3600</code> (1 hour)</li><li><strong>Example</strong>: <code>DB_CONN_MAX_LIFETIME=7200</code></li><li><strong>Note</strong>: Connections older than this will be closed and recreated</li></ul><h3 id="db-log-level" tabindex="-1">DB_LOG_LEVEL <a class="header-anchor" href="#db-log-level" aria-label="Permalink to &quot;DB_LOG_LEVEL&quot;">​</a></h3><ul><li><strong>Description</strong>: Database log level</li><li><strong>Default</strong>: <code>warn</code></li><li><strong>Options</strong>: <code>silent</code>, <code>error</code>, <code>warn</code>, <code>info</code></li><li><strong>Example</strong>: <code>DB_LOG_LEVEL=info</code></li></ul><h3 id="db-retention-days" tabindex="-1">DB_RETENTION_DAYS <a class="header-anchor" href="#db-retention-days" aria-label="Permalink to &quot;DB_RETENTION_DAYS&quot;">​</a></h3><ul><li><strong>Description</strong>: Global data retention period in days (legacy setting, kept for backward compatibility)</li><li><strong>Default</strong>: <code>90</code></li><li><strong>Example</strong>: <code>DB_RETENTION_DAYS=180</code></li><li><strong>Note</strong>: This setting is automatically migrated to granular retention policy. For fine-grained control, use the granular retention environment variables below.</li></ul><h3 id="granular-retention-settings" tabindex="-1">Granular Retention Settings <a class="header-anchor" href="#granular-retention-settings" aria-label="Permalink to &quot;Granular Retention Settings&quot;">​</a></h3><p>The following environment variables allow you to configure retention periods for specific data types. If not set, they default to values derived from <code>DB_RETENTION_DAYS</code> or system defaults.</p><h4 id="db-retention-alerts-days" tabindex="-1">DB_RETENTION_ALERTS_DAYS <a class="header-anchor" href="#db-retention-alerts-days" aria-label="Permalink to &quot;DB_RETENTION_ALERTS_DAYS&quot;">​</a></h4><ul><li><strong>Description</strong>: Security alerts retention period in days</li><li><strong>Default</strong>: <code>90</code> (or value from <code>DB_RETENTION_DAYS</code>)</li><li><strong>Example</strong>: <code>DB_RETENTION_ALERTS_DAYS=180</code></li><li><strong>Minimum</strong>: <code>7</code> days</li><li><strong>Maximum</strong>: <code>3650</code> days (10 years)</li><li><strong>Note</strong>: Recommended 90+ days for compliance and forensics</li></ul><h4 id="db-retention-audit-logs-days" tabindex="-1">DB_RETENTION_AUDIT_LOGS_DAYS <a class="header-anchor" href="#db-retention-audit-logs-days" aria-label="Permalink to &quot;DB_RETENTION_AUDIT_LOGS_DAYS&quot;">​</a></h4><ul><li><strong>Description</strong>: General audit logs retention (MCP/LLM proxy requests, A2A invocations)</li><li><strong>Default</strong>: <code>90</code> (or value from <code>DB_RETENTION_DAYS</code>)</li><li><strong>Example</strong>: <code>DB_RETENTION_AUDIT_LOGS_DAYS=180</code></li><li><strong>Minimum</strong>: <code>30</code> days</li><li><strong>Maximum</strong>: <code>3650</code> days (10 years)</li><li><strong>Note</strong>: Recommended 90+ days for compliance</li></ul><h4 id="db-retention-request-logs-days" tabindex="-1">DB_RETENTION_REQUEST_LOGS_DAYS <a class="header-anchor" href="#db-retention-request-logs-days" aria-label="Permalink to &quot;DB_RETENTION_REQUEST_LOGS_DAYS&quot;">​</a></h4><ul><li><strong>Description</strong>: HTTP/WebSocket request logs retention period</li><li><strong>Default</strong>: <code>30</code> (or <code>DB_RETENTION_DAYS / 3</code>, minimum 7)</li><li><strong>Example</strong>: <code>DB_RETENTION_REQUEST_LOGS_DAYS=60</code></li><li><strong>Minimum</strong>: <code>7</code> days</li><li><strong>Maximum</strong>: <code>3650</code> days (10 years)</li><li><strong>Note</strong>: Recommended 30 days for privacy (shorter than audit logs)</li></ul><h4 id="db-retention-token-usage-days" tabindex="-1">DB_RETENTION_TOKEN_USAGE_DAYS <a class="header-anchor" href="#db-retention-token-usage-days" aria-label="Permalink to &quot;DB_RETENTION_TOKEN_USAGE_DAYS&quot;">​</a></h4><ul><li><strong>Description</strong>: LLM token usage records retention period</li><li><strong>Default</strong>: <code>365</code> (or value from <code>DB_RETENTION_DAYS</code>)</li><li><strong>Example</strong>: <code>DB_RETENTION_TOKEN_USAGE_DAYS=730</code></li><li><strong>Minimum</strong>: <code>30</code> days</li><li><strong>Maximum</strong>: <code>3650</code> days (10 years)</li><li><strong>Note</strong>: Recommended 365 days for annual cost tracking</li></ul><h4 id="db-retention-health-metrics-days" tabindex="-1">DB_RETENTION_HEALTH_METRICS_DAYS <a class="header-anchor" href="#db-retention-health-metrics-days" aria-label="Permalink to &quot;DB_RETENTION_HEALTH_METRICS_DAYS&quot;">​</a></h4><ul><li><strong>Description</strong>: System health metrics retention period</li><li><strong>Default</strong>: <code>30</code> days</li><li><strong>Example</strong>: <code>DB_RETENTION_HEALTH_METRICS_DAYS=60</code></li><li><strong>Minimum</strong>: <code>7</code> days</li><li><strong>Maximum</strong>: <code>3650</code> days (10 years)</li><li><strong>Note</strong>: Recommended 30 days for operational monitoring</li></ul><h4 id="db-retention-mcp-tool-logs-days" tabindex="-1">DB_RETENTION_MCP_TOOL_LOGS_DAYS <a class="header-anchor" href="#db-retention-mcp-tool-logs-days" aria-label="Permalink to &quot;DB_RETENTION_MCP_TOOL_LOGS_DAYS&quot;">​</a></h4><ul><li><strong>Description</strong>: MCP tool invocation logs retention period</li><li><strong>Default</strong>: <code>90</code> (or value from <code>DB_RETENTION_DAYS</code>)</li><li><strong>Example</strong>: <code>DB_RETENTION_MCP_TOOL_LOGS_DAYS=180</code></li><li><strong>Minimum</strong>: <code>30</code> days</li><li><strong>Maximum</strong>: <code>3650</code> days (10 years)</li><li><strong>Note</strong>: Recommended 90 days (same as audit logs)</li></ul><h4 id="db-retention-llm-request-logs-days" tabindex="-1">DB_RETENTION_LLM_REQUEST_LOGS_DAYS <a class="header-anchor" href="#db-retention-llm-request-logs-days" aria-label="Permalink to &quot;DB_RETENTION_LLM_REQUEST_LOGS_DAYS&quot;">​</a></h4><ul><li><strong>Description</strong>: LLM request/response logs retention period</li><li><strong>Default</strong>: <code>90</code> (or value from <code>DB_RETENTION_DAYS</code>)</li><li><strong>Example</strong>: <code>DB_RETENTION_LLM_REQUEST_LOGS_DAYS=180</code></li><li><strong>Minimum</strong>: <code>30</code> days</li><li><strong>Maximum</strong>: <code>3650</code> days (10 years)</li><li><strong>Note</strong>: Recommended 90 days (same as audit logs)</li></ul><h4 id="db-retention-a2a-invocation-logs-days" tabindex="-1">DB_RETENTION_A2A_INVOCATION_LOGS_DAYS <a class="header-anchor" href="#db-retention-a2a-invocation-logs-days" aria-label="Permalink to &quot;DB_RETENTION_A2A_INVOCATION_LOGS_DAYS&quot;">​</a></h4><ul><li><strong>Description</strong>: A2A agent invocation audit logs retention period</li><li><strong>Default</strong>: <code>90</code> (or value from <code>DB_RETENTION_DAYS</code>)</li><li><strong>Example</strong>: <code>DB_RETENTION_A2A_INVOCATION_LOGS_DAYS=180</code></li><li><strong>Minimum</strong>: <code>30</code> days</li><li><strong>Maximum</strong>: <code>3650</code> days (10 years)</li><li><strong>Note</strong>: Recommended 90 days (same as audit logs)</li></ul><p><strong>Important Notes:</strong></p><ul><li>Granular retention settings override the global <code>DB_RETENTION_DAYS</code> setting</li><li>If <code>DB_RETENTION_DAYS</code> is set but granular settings are not, the system automatically migrates to granular policy preserving current behavior</li><li>Token usage records are now automatically cleaned up (previously missing - critical fix)</li><li>Cleanup runs daily at midnight</li><li>Changes to retention settings take effect on the next cleanup cycle</li></ul><h3 id="db-max-payload-size" tabindex="-1">DB_MAX_PAYLOAD_SIZE <a class="header-anchor" href="#db-max-payload-size" aria-label="Permalink to &quot;DB_MAX_PAYLOAD_SIZE&quot;">​</a></h3><ul><li><strong>Description</strong>: Maximum size in bytes for audit log payloads (request/response bodies)</li><li><strong>Default</strong>: <code>102400</code> (100KB)</li><li><strong>Example</strong>: <code>DB_MAX_PAYLOAD_SIZE=204800</code> (200KB)</li><li><strong>Note</strong>: <ul><li>Payloads larger than this limit will be truncated with a <code>...[truncated]</code> indicator</li><li>Set to <code>0</code> for unlimited (not recommended for high-throughput scenarios)</li><li>Smaller values improve INSERT performance but may lose audit detail</li><li>Recommended: 50KB-200KB depending on typical payload sizes</li></ul></li></ul><h2 id="request-timeout-configuration" tabindex="-1">Request Timeout Configuration <a class="header-anchor" href="#request-timeout-configuration" aria-label="Permalink to &quot;Request Timeout Configuration&quot;">​</a></h2><h3 id="db-query-timeout" tabindex="-1">DB_QUERY_TIMEOUT <a class="header-anchor" href="#db-query-timeout" aria-label="Permalink to &quot;DB_QUERY_TIMEOUT&quot;">​</a></h3><ul><li><strong>Description</strong>: Database query timeout in seconds</li><li><strong>Default</strong>: <code>10</code></li><li><strong>Example</strong>: <code>DB_QUERY_TIMEOUT=15</code></li><li><strong>Note</strong>: Maximum time allowed for a single database query</li></ul><h3 id="external-api-timeout" tabindex="-1">EXTERNAL_API_TIMEOUT <a class="header-anchor" href="#external-api-timeout" aria-label="Permalink to &quot;EXTERNAL_API_TIMEOUT&quot;">​</a></h3><ul><li><strong>Description</strong>: External API timeout in seconds</li><li><strong>Default</strong>: <code>30</code></li><li><strong>Example</strong>: <code>EXTERNAL_API_TIMEOUT=60</code></li><li><strong>Note</strong>: Timeout for external API calls (OAuth, MCP, etc.)</li></ul><h3 id="policy-validation-timeout" tabindex="-1">POLICY_VALIDATION_TIMEOUT <a class="header-anchor" href="#policy-validation-timeout" aria-label="Permalink to &quot;POLICY_VALIDATION_TIMEOUT&quot;">​</a></h3><ul><li><strong>Description</strong>: Policy validation timeout in seconds</li><li><strong>Default</strong>: <code>5</code></li><li><strong>Example</strong>: <code>POLICY_VALIDATION_TIMEOUT=10</code></li><li><strong>Note</strong>: Timeout for policy compilation and validation</li></ul><h3 id="request-handler-timeout" tabindex="-1">REQUEST_HANDLER_TIMEOUT <a class="header-anchor" href="#request-handler-timeout" aria-label="Permalink to &quot;REQUEST_HANDLER_TIMEOUT&quot;">​</a></h3><ul><li><strong>Description</strong>: Request handler timeout in seconds</li><li><strong>Default</strong>: <code>60</code></li><li><strong>Example</strong>: <code>REQUEST_HANDLER_TIMEOUT=120</code></li><li><strong>Note</strong>: Maximum time allowed for processing an entire HTTP request</li></ul><h2 id="oauth-security-configuration" tabindex="-1">OAuth &amp; Security Configuration <a class="header-anchor" href="#oauth-security-configuration" aria-label="Permalink to &quot;OAuth &amp; Security Configuration&quot;">​</a></h2><h3 id="encryption-key" tabindex="-1">ENCRYPTION_KEY <a class="header-anchor" href="#encryption-key" aria-label="Permalink to &quot;ENCRYPTION_KEY&quot;">​</a></h3><ul><li><strong>Description</strong>: Encryption key for OAuth tokens and sensitive data</li><li><strong>Required</strong>: Yes (for OAuth functionality)</li><li><strong>Example</strong>: Generate with: <code>openssl rand -hex 32</code></li><li><strong>Note</strong>: Must be a secure random 32-byte hex string</li></ul><h2 id="mcp-tool-scanning-configuration" tabindex="-1">MCP Tool Scanning Configuration <a class="header-anchor" href="#mcp-tool-scanning-configuration" aria-label="Permalink to &quot;MCP Tool Scanning Configuration&quot;">​</a></h2><h3 id="mcp-tool-scan-max-concurrency" tabindex="-1">MCP_TOOL_SCAN_MAX_CONCURRENCY <a class="header-anchor" href="#mcp-tool-scan-max-concurrency" aria-label="Permalink to &quot;MCP_TOOL_SCAN_MAX_CONCURRENCY&quot;">​</a></h3><ul><li><strong>Description</strong>: Maximum number of concurrent MCP tool scans</li><li><strong>Default</strong>: <code>5</code></li><li><strong>Example</strong>: <code>MCP_TOOL_SCAN_MAX_CONCURRENCY=10</code></li><li><strong>Note</strong>: Increase for faster scanning of multiple proxies, but be mindful of resource usage</li></ul><h3 id="mcp-tool-scan-timeout" tabindex="-1">MCP_TOOL_SCAN_TIMEOUT <a class="header-anchor" href="#mcp-tool-scan-timeout" aria-label="Permalink to &quot;MCP_TOOL_SCAN_TIMEOUT&quot;">​</a></h3><ul><li><strong>Description</strong>: Timeout per proxy scan in seconds</li><li><strong>Default</strong>: <code>120</code> (2 minutes)</li><li><strong>Example</strong>: <code>MCP_TOOL_SCAN_TIMEOUT=180</code></li><li><strong>Note</strong>: Prevents one slow proxy from blocking the entire scan</li></ul><h3 id="mcp-tool-scan-interval-hours" tabindex="-1">MCP_TOOL_SCAN_INTERVAL_HOURS <a class="header-anchor" href="#mcp-tool-scan-interval-hours" aria-label="Permalink to &quot;MCP_TOOL_SCAN_INTERVAL_HOURS&quot;">​</a></h3><ul><li><strong>Description</strong>: Interval between scheduled scans in hours</li><li><strong>Default</strong>: <code>6</code></li><li><strong>Example</strong>: <code>MCP_TOOL_SCAN_INTERVAL_HOURS=12</code></li><li><strong>Note</strong>: How often to automatically scan all MCP proxies for tool changes</li></ul><h2 id="api-server-configuration" tabindex="-1">API Server Configuration <a class="header-anchor" href="#api-server-configuration" aria-label="Permalink to &quot;API Server Configuration&quot;">​</a></h2><h3 id="port" tabindex="-1">PORT <a class="header-anchor" href="#port" aria-label="Permalink to &quot;PORT&quot;">​</a></h3><ul><li><strong>Description</strong>: Port number for the API server</li><li><strong>Default</strong>: <code>8080</code></li><li><strong>Example</strong>: <code>PORT=3000</code></li><li><strong>Note</strong>: The port on which the API server will listen</li></ul><h3 id="environment" tabindex="-1">ENVIRONMENT <a class="header-anchor" href="#environment" aria-label="Permalink to &quot;ENVIRONMENT&quot;">​</a></h3><ul><li><strong>Description</strong>: Application environment</li><li><strong>Default</strong>: <code>development</code></li><li><strong>Options</strong>: <code>development</code>, <code>production</code>, <code>staging</code></li><li><strong>Example</strong>: <code>ENVIRONMENT=production</code></li><li><strong>Note</strong>: Affects logging levels and security settings</li></ul><h3 id="allowed-origins" tabindex="-1">ALLOWED_ORIGINS <a class="header-anchor" href="#allowed-origins" aria-label="Permalink to &quot;ALLOWED_ORIGINS&quot;">​</a></h3><ul><li><strong>Description</strong>: Comma-separated list of allowed CORS origins</li><li><strong>Default</strong>: <code>http://localhost:8080,http://localhost:3000,http://localhost:5173</code></li><li><strong>Example</strong>: <code>ALLOWED_ORIGINS=http://localhost:3000,https://example.com</code></li><li><strong>Note</strong>: Used for CORS configuration. Multiple origins should be comma-separated</li></ul><h2 id="response-cache-configuration" tabindex="-1">Response Cache Configuration <a class="header-anchor" href="#response-cache-configuration" aria-label="Permalink to &quot;Response Cache Configuration&quot;">​</a></h2><h3 id="cache-dashboard-ttl" tabindex="-1">CACHE_DASHBOARD_TTL <a class="header-anchor" href="#cache-dashboard-ttl" aria-label="Permalink to &quot;CACHE_DASHBOARD_TTL&quot;">​</a></h3><ul><li><strong>Description</strong>: Dashboard cache TTL in seconds</li><li><strong>Default</strong>: <code>60</code></li><li><strong>Example</strong>: <code>CACHE_DASHBOARD_TTL=120</code></li><li><strong>Note</strong>: How long dashboard data is cached before refresh</li></ul><h3 id="cache-policy-ttl" tabindex="-1">CACHE_POLICY_TTL <a class="header-anchor" href="#cache-policy-ttl" aria-label="Permalink to &quot;CACHE_POLICY_TTL&quot;">​</a></h3><ul><li><strong>Description</strong>: Policy list cache TTL in seconds</li><li><strong>Default</strong>: <code>300</code> (5 minutes)</li><li><strong>Example</strong>: <code>CACHE_POLICY_TTL=600</code></li><li><strong>Note</strong>: How long policy list data is cached</li></ul><h3 id="cache-proxy-ttl" tabindex="-1">CACHE_PROXY_TTL <a class="header-anchor" href="#cache-proxy-ttl" aria-label="Permalink to &quot;CACHE_PROXY_TTL&quot;">​</a></h3><ul><li><strong>Description</strong>: Proxy configuration cache TTL in seconds</li><li><strong>Default</strong>: <code>300</code> (5 minutes)</li><li><strong>Example</strong>: <code>CACHE_PROXY_TTL=600</code></li><li><strong>Note</strong>: How long proxy configuration data is cached</li></ul><h3 id="cache-enable-etag" tabindex="-1">CACHE_ENABLE_ETAG <a class="header-anchor" href="#cache-enable-etag" aria-label="Permalink to &quot;CACHE_ENABLE_ETAG&quot;">​</a></h3><ul><li><strong>Description</strong>: Enable ETag support for HTTP caching</li><li><strong>Default</strong>: <code>true</code></li><li><strong>Example</strong>: <code>CACHE_ENABLE_ETAG=false</code></li><li><strong>Note</strong>: ETags allow clients to cache responses and check for updates efficiently</li></ul><h2 id="http-request-configuration" tabindex="-1">HTTP Request Configuration <a class="header-anchor" href="#http-request-configuration" aria-label="Permalink to &quot;HTTP Request Configuration&quot;">​</a></h2><h3 id="max-request-size-mb" tabindex="-1">MAX_REQUEST_SIZE_MB <a class="header-anchor" href="#max-request-size-mb" aria-label="Permalink to &quot;MAX_REQUEST_SIZE_MB&quot;">​</a></h3><ul><li><strong>Description</strong>: Maximum request body size in megabytes</li><li><strong>Default</strong>: <code>10</code></li><li><strong>Example</strong>: <code>MAX_REQUEST_SIZE_MB=50</code></li><li><strong>Note</strong>: Prevents DoS attacks from large payloads. Increase for large file uploads.</li></ul><h2 id="system-metrics-configuration" tabindex="-1">System Metrics Configuration <a class="header-anchor" href="#system-metrics-configuration" aria-label="Permalink to &quot;System Metrics Configuration&quot;">​</a></h2><h3 id="metrics-update-interval-seconds" tabindex="-1">METRICS_UPDATE_INTERVAL_SECONDS <a class="header-anchor" href="#metrics-update-interval-seconds" aria-label="Permalink to &quot;METRICS_UPDATE_INTERVAL_SECONDS&quot;">​</a></h3><ul><li><strong>Description</strong>: Interval for updating system and connection pool metrics in seconds</li><li><strong>Default</strong>: <code>30</code></li><li><strong>Example</strong>: <code>METRICS_UPDATE_INTERVAL_SECONDS=60</code></li><li><strong>Note</strong>: How often to collect system metrics (CPU, memory, goroutines, connection pool stats). Lower values provide more frequent updates but use more CPU.</li></ul><h3 id="enable-metrics" tabindex="-1">ENABLE_METRICS <a class="header-anchor" href="#enable-metrics" aria-label="Permalink to &quot;ENABLE_METRICS&quot;">​</a></h3><ul><li><strong>Description</strong>: Enable metrics collection</li><li><strong>Default</strong>: <code>true</code></li><li><strong>Example</strong>: <code>ENABLE_METRICS=false</code></li><li><strong>Note</strong>: Disable metrics collection to reduce overhead in resource-constrained environments</li></ul><h2 id="http-client-pool-configuration" tabindex="-1">HTTP Client Pool Configuration <a class="header-anchor" href="#http-client-pool-configuration" aria-label="Permalink to &quot;HTTP Client Pool Configuration&quot;">​</a></h2><p>The HTTP client pool manages connection reuse for outbound HTTP requests (MCP tool discovery, SSE connections, etc.). These settings control connection pooling behavior.</p><h3 id="http-client-pool-max-idle-conns" tabindex="-1">HTTP_CLIENT_POOL_MAX_IDLE_CONNS <a class="header-anchor" href="#http-client-pool-max-idle-conns" aria-label="Permalink to &quot;HTTP_CLIENT_POOL_MAX_IDLE_CONNS&quot;">​</a></h3><ul><li><strong>Description</strong>: Maximum number of idle connections across all hosts</li><li><strong>Default</strong>: <code>100</code></li><li><strong>Example</strong>: <code>HTTP_CLIENT_POOL_MAX_IDLE_CONNS=200</code></li><li><strong>Note</strong>: Increase for high-concurrency scenarios with many outbound HTTP requests</li></ul><h3 id="http-client-pool-max-idle-conns-per-host" tabindex="-1">HTTP_CLIENT_POOL_MAX_IDLE_CONNS_PER_HOST <a class="header-anchor" href="#http-client-pool-max-idle-conns-per-host" aria-label="Permalink to &quot;HTTP_CLIENT_POOL_MAX_IDLE_CONNS_PER_HOST&quot;">​</a></h3><ul><li><strong>Description</strong>: Maximum number of idle connections per host</li><li><strong>Default</strong>: <code>10</code></li><li><strong>Example</strong>: <code>HTTP_CLIENT_POOL_MAX_IDLE_CONNS_PER_HOST=20</code></li><li><strong>Note</strong>: Higher values improve connection reuse for frequently accessed hosts</li></ul><h3 id="http-client-pool-max-conns-per-host" tabindex="-1">HTTP_CLIENT_POOL_MAX_CONNS_PER_HOST <a class="header-anchor" href="#http-client-pool-max-conns-per-host" aria-label="Permalink to &quot;HTTP_CLIENT_POOL_MAX_CONNS_PER_HOST&quot;">​</a></h3><ul><li><strong>Description</strong>: Maximum number of connections per host (0 = unlimited)</li><li><strong>Default</strong>: <code>0</code> (unlimited)</li><li><strong>Example</strong>: <code>HTTP_CLIENT_POOL_MAX_CONNS_PER_HOST=50</code></li><li><strong>Note</strong>: Set to limit connections per host to prevent overwhelming target servers</li></ul><h3 id="http-client-pool-idle-timeout" tabindex="-1">HTTP_CLIENT_POOL_IDLE_TIMEOUT <a class="header-anchor" href="#http-client-pool-idle-timeout" aria-label="Permalink to &quot;HTTP_CLIENT_POOL_IDLE_TIMEOUT&quot;">​</a></h3><ul><li><strong>Description</strong>: Maximum time an idle connection will remain idle before closing (in seconds)</li><li><strong>Default</strong>: <code>90</code></li><li><strong>Example</strong>: <code>HTTP_CLIENT_POOL_IDLE_TIMEOUT=120</code></li><li><strong>Note</strong>: Idle connections are closed after this timeout to free resources</li></ul><h3 id="http-client-pool-disable-keep-alives" tabindex="-1">HTTP_CLIENT_POOL_DISABLE_KEEP_ALIVES <a class="header-anchor" href="#http-client-pool-disable-keep-alives" aria-label="Permalink to &quot;HTTP_CLIENT_POOL_DISABLE_KEEP_ALIVES&quot;">​</a></h3><ul><li><strong>Description</strong>: Disable HTTP keep-alives (not recommended)</li><li><strong>Default</strong>: <code>false</code></li><li><strong>Example</strong>: <code>HTTP_CLIENT_POOL_DISABLE_KEEP_ALIVES=true</code></li><li><strong>Note</strong>: Disabling keep-alives prevents connection reuse and increases overhead</li></ul><h3 id="http-client-pool-disable-compression" tabindex="-1">HTTP_CLIENT_POOL_DISABLE_COMPRESSION <a class="header-anchor" href="#http-client-pool-disable-compression" aria-label="Permalink to &quot;HTTP_CLIENT_POOL_DISABLE_COMPRESSION&quot;">​</a></h3><ul><li><strong>Description</strong>: Disable HTTP compression</li><li><strong>Default</strong>: <code>false</code></li><li><strong>Example</strong>: <code>HTTP_CLIENT_POOL_DISABLE_COMPRESSION=true</code></li><li><strong>Note</strong>: Disabling compression increases bandwidth usage but may reduce CPU overhead</li></ul><h3 id="http-client-pool-tls-handshake-timeout" tabindex="-1">HTTP_CLIENT_POOL_TLS_HANDSHAKE_TIMEOUT <a class="header-anchor" href="#http-client-pool-tls-handshake-timeout" aria-label="Permalink to &quot;HTTP_CLIENT_POOL_TLS_HANDSHAKE_TIMEOUT&quot;">​</a></h3><ul><li><strong>Description</strong>: Maximum time to wait for TLS handshake (in seconds)</li><li><strong>Default</strong>: <code>10</code></li><li><strong>Example</strong>: <code>HTTP_CLIENT_POOL_TLS_HANDSHAKE_TIMEOUT=15</code></li><li><strong>Note</strong>: Increase for slow networks or servers with slow TLS handshakes</li></ul><h3 id="http-client-pool-response-header-timeout" tabindex="-1">HTTP_CLIENT_POOL_RESPONSE_HEADER_TIMEOUT <a class="header-anchor" href="#http-client-pool-response-header-timeout" aria-label="Permalink to &quot;HTTP_CLIENT_POOL_RESPONSE_HEADER_TIMEOUT&quot;">​</a></h3><ul><li><strong>Description</strong>: Maximum time to wait for response headers (in seconds)</li><li><strong>Default</strong>: <code>10</code></li><li><strong>Example</strong>: <code>HTTP_CLIENT_POOL_RESPONSE_HEADER_TIMEOUT=20</code></li><li><strong>Note</strong>: Increase for slow servers or high-latency networks</li></ul><h3 id="http-client-pool-expect-continue-timeout" tabindex="-1">HTTP_CLIENT_POOL_EXPECT_CONTINUE_TIMEOUT <a class="header-anchor" href="#http-client-pool-expect-continue-timeout" aria-label="Permalink to &quot;HTTP_CLIENT_POOL_EXPECT_CONTINUE_TIMEOUT&quot;">​</a></h3><ul><li><strong>Description</strong>: Maximum time to wait for 100-continue response (in seconds)</li><li><strong>Default</strong>: <code>1</code></li><li><strong>Example</strong>: <code>HTTP_CLIENT_POOL_EXPECT_CONTINUE_TIMEOUT=2</code></li><li><strong>Note</strong>: Used when sending requests with Expect: 100-continue header</li></ul><h3 id="http-client-pool-default-timeout" tabindex="-1">HTTP_CLIENT_POOL_DEFAULT_TIMEOUT <a class="header-anchor" href="#http-client-pool-default-timeout" aria-label="Permalink to &quot;HTTP_CLIENT_POOL_DEFAULT_TIMEOUT&quot;">​</a></h3><ul><li><strong>Description</strong>: Default timeout for HTTP requests (in seconds)</li><li><strong>Default</strong>: <code>30</code></li><li><strong>Example</strong>: <code>HTTP_CLIENT_POOL_DEFAULT_TIMEOUT=60</code></li><li><strong>Note</strong>: Used when no specific timeout is provided for a request</li></ul><h2 id="opentelemetry-tracing-configuration" tabindex="-1">OpenTelemetry Tracing Configuration <a class="header-anchor" href="#opentelemetry-tracing-configuration" aria-label="Permalink to &quot;OpenTelemetry Tracing Configuration&quot;">​</a></h2><p>The gateway supports distributed tracing using OpenTelemetry for end-to-end visibility into request flows. These settings control tracing behavior and integration with observability backends.</p><h3 id="tracing-enabled" tabindex="-1">TRACING_ENABLED <a class="header-anchor" href="#tracing-enabled" aria-label="Permalink to &quot;TRACING_ENABLED&quot;">​</a></h3><ul><li><strong>Description</strong>: Enable/disable distributed tracing</li><li><strong>Default</strong>: <code>false</code></li><li><strong>Example</strong>: <code>TRACING_ENABLED=true</code></li><li><strong>Note</strong>: When enabled, all HTTP requests are automatically traced</li></ul><h3 id="tracing-service-name" tabindex="-1">TRACING_SERVICE_NAME <a class="header-anchor" href="#tracing-service-name" aria-label="Permalink to &quot;TRACING_SERVICE_NAME&quot;">​</a></h3><ul><li><strong>Description</strong>: Service name for traces</li><li><strong>Default</strong>: <code>ai-security-gateway</code></li><li><strong>Example</strong>: <code>TRACING_SERVICE_NAME=ai-gateway-prod</code></li><li><strong>Note</strong>: Used to identify your service in trace visualization tools</li></ul><h3 id="tracing-environment" tabindex="-1">TRACING_ENVIRONMENT <a class="header-anchor" href="#tracing-environment" aria-label="Permalink to &quot;TRACING_ENVIRONMENT&quot;">​</a></h3><ul><li><strong>Description</strong>: Environment name (development, staging, production)</li><li><strong>Default</strong>: <code>development</code></li><li><strong>Example</strong>: <code>TRACING_ENVIRONMENT=production</code></li><li><strong>Note</strong>: Helps filter traces by environment in observability tools</li></ul><h3 id="tracing-otlp-endpoint" tabindex="-1">TRACING_OTLP_ENDPOINT <a class="header-anchor" href="#tracing-otlp-endpoint" aria-label="Permalink to &quot;TRACING_OTLP_ENDPOINT&quot;">​</a></h3><ul><li><strong>Description</strong>: OTLP HTTP endpoint for trace export</li><li><strong>Default</strong>: <code>http://localhost:4318</code></li><li><strong>Example</strong>: <code>TRACING_OTLP_ENDPOINT=http://otel-collector:4318</code></li><li><strong>Note</strong>: Endpoint must accept OTLP HTTP protocol</li></ul><h3 id="tracing-sample-rate" tabindex="-1">TRACING_SAMPLE_RATE <a class="header-anchor" href="#tracing-sample-rate" aria-label="Permalink to &quot;TRACING_SAMPLE_RATE&quot;">​</a></h3><ul><li><strong>Description</strong>: Sampling rate for traces (0.0 to 1.0)</li><li><strong>Default</strong>: <code>1.0</code> (100% sampling)</li><li><strong>Example</strong>: <code>TRACING_SAMPLE_RATE=0.1</code> (10% sampling)</li><li><strong>Note</strong>: Lower values reduce trace volume but may miss important traces</li></ul><h2 id="langfuse-integration-llm-observability" tabindex="-1">Langfuse Integration (LLM Observability) <a class="header-anchor" href="#langfuse-integration-llm-observability" aria-label="Permalink to &quot;Langfuse Integration (LLM Observability)&quot;">​</a></h2><p>Langfuse is an open-source LLM observability platform that provides specialized monitoring and analytics for LLM applications. These settings enable integration with Langfuse for enhanced LLM-specific observability.</p><p><strong>⚠️ Configuration Method</strong>: Langfuse can be configured via <strong>Web UI</strong> (recommended) or <strong>Environment Variables</strong>. The Web UI is the preferred method for most users as it provides immediate feedback and testing capabilities. Environment variables are useful for:</p><ul><li>Containerized deployments (Docker, Kubernetes)</li><li>Infrastructure-as-Code (Terraform, Ansible)</li><li>CI/CD pipelines</li><li>Initial setup before UI access</li></ul><p><strong>Note</strong>: Settings configured via the Web UI are persisted and take precedence over environment variables. Both methods are equivalent - choose based on your deployment needs.</p><h3 id="langfuse-enabled" tabindex="-1">LANGFUSE_ENABLED <a class="header-anchor" href="#langfuse-enabled" aria-label="Permalink to &quot;LANGFUSE_ENABLED&quot;">​</a></h3><ul><li><strong>Description</strong>: Enable Langfuse integration</li><li><strong>Default</strong>: <code>false</code></li><li><strong>Example</strong>: <code>LANGFUSE_ENABLED=true</code></li><li><strong>Note</strong>: <ul><li>When enabled, automatically enables tracing and sends traces to Langfuse</li><li><strong>Alternative</strong>: Configure via Web UI (Settings → Integrations → Langfuse) - no restart required</li></ul></li></ul><h3 id="langfuse-otlp-endpoint" tabindex="-1">LANGFUSE_OTLP_ENDPOINT <a class="header-anchor" href="#langfuse-otlp-endpoint" aria-label="Permalink to &quot;LANGFUSE_OTLP_ENDPOINT&quot;">​</a></h3><ul><li><strong>Description</strong>: Langfuse OTLP endpoint URL</li><li><strong>Default</strong>: <code>https://cloud.langfuse.com</code> (when LANGFUSE_ENABLED=true)</li><li><strong>Example (Cloud)</strong>: <code>LANGFUSE_OTLP_ENDPOINT=https://cloud.langfuse.com</code></li><li><strong>Example (Self-hosted)</strong>: <code>LANGFUSE_OTLP_ENDPOINT=http://langfuse:4318</code></li><li><strong>Note</strong>: <ul><li>For Langfuse Cloud, use <code>https://cloud.langfuse.com</code></li><li>For self-hosted Langfuse, use your Langfuse server URL with port 4318</li><li>The gateway automatically appends <code>/api/public/otel/v1/traces</code> for Langfuse endpoints</li><li><strong>Alternative</strong>: Configure via Web UI (Settings → Integrations → Langfuse) - no restart required</li></ul></li></ul><h3 id="langfuse-public-key" tabindex="-1">LANGFUSE_PUBLIC_KEY <a class="header-anchor" href="#langfuse-public-key" aria-label="Permalink to &quot;LANGFUSE_PUBLIC_KEY&quot;">​</a></h3><ul><li><strong>Description</strong>: Langfuse public key (pk-...)</li><li><strong>Required</strong>: Yes (when LANGFUSE_ENABLED=true)</li><li><strong>Example</strong>: <code>LANGFUSE_PUBLIC_KEY=pk-lf-...</code></li><li><strong>Note</strong>: <ul><li>Get from Langfuse project settings</li><li>Used for authentication with Langfuse API</li><li>Keep this key secure but it can be exposed in client-side code</li><li><strong>Alternative</strong>: Configure via Web UI (Settings → Integrations → Langfuse) - no restart required</li></ul></li></ul><h3 id="langfuse-secret-key" tabindex="-1">LANGFUSE_SECRET_KEY <a class="header-anchor" href="#langfuse-secret-key" aria-label="Permalink to &quot;LANGFUSE_SECRET_KEY&quot;">​</a></h3><ul><li><strong>Description</strong>: Langfuse secret key (sk-...)</li><li><strong>Required</strong>: Yes (when LANGFUSE_ENABLED=true)</li><li><strong>Example</strong>: <code>LANGFUSE_SECRET_KEY=sk-lf-...</code></li><li><strong>Note</strong>: <ul><li>Get from Langfuse project settings</li><li>Used for authentication with Langfuse API</li><li><strong>Keep this key secret</strong> - never expose in client-side code or logs</li><li><strong>Alternative</strong>: Configure via Web UI (Settings → Integrations → Langfuse) - no restart required</li></ul></li></ul><h2 id="websocket-configuration" tabindex="-1">WebSocket Configuration <a class="header-anchor" href="#websocket-configuration" aria-label="Permalink to &quot;WebSocket Configuration&quot;">​</a></h2><p>The WebSocket manager handles real-time connections for alert broadcasting and notifications. These settings control connection limits, timeouts, and performance tuning.</p><h3 id="websocket-max-connections" tabindex="-1">WEBSOCKET_MAX_CONNECTIONS <a class="header-anchor" href="#websocket-max-connections" aria-label="Permalink to &quot;WEBSOCKET_MAX_CONNECTIONS&quot;">​</a></h3><ul><li><strong>Description</strong>: Maximum number of concurrent WebSocket connections (0 = unlimited)</li><li><strong>Default</strong>: <code>1000</code></li><li><strong>Example</strong>: <code>WEBSOCKET_MAX_CONNECTIONS=2000</code></li><li><strong>Note</strong>: Increase for high-concurrency scenarios with many connected clients</li></ul><h3 id="websocket-max-idle-time" tabindex="-1">WEBSOCKET_MAX_IDLE_TIME <a class="header-anchor" href="#websocket-max-idle-time" aria-label="Permalink to &quot;WEBSOCKET_MAX_IDLE_TIME&quot;">​</a></h3><ul><li><strong>Description</strong>: Maximum time a connection can be idle before cleanup (in seconds)</li><li><strong>Default</strong>: <code>600</code> (10 minutes)</li><li><strong>Example</strong>: <code>WEBSOCKET_MAX_IDLE_TIME=1200</code></li><li><strong>Note</strong>: Idle connections are automatically cleaned up to free resources</li></ul><h3 id="websocket-ping-interval" tabindex="-1">WEBSOCKET_PING_INTERVAL <a class="header-anchor" href="#websocket-ping-interval" aria-label="Permalink to &quot;WEBSOCKET_PING_INTERVAL&quot;">​</a></h3><ul><li><strong>Description</strong>: Interval for sending ping messages to keep connections alive (in seconds)</li><li><strong>Default</strong>: <code>30</code></li><li><strong>Example</strong>: <code>WEBSOCKET_PING_INTERVAL=60</code></li><li><strong>Note</strong>: Lower values keep connections more active but use more bandwidth</li></ul><h3 id="websocket-write-timeout" tabindex="-1">WEBSOCKET_WRITE_TIMEOUT <a class="header-anchor" href="#websocket-write-timeout" aria-label="Permalink to &quot;WEBSOCKET_WRITE_TIMEOUT&quot;">​</a></h3><ul><li><strong>Description</strong>: Write deadline timeout for WebSocket messages (in seconds)</li><li><strong>Default</strong>: <code>10</code></li><li><strong>Example</strong>: <code>WEBSOCKET_WRITE_TIMEOUT=20</code></li><li><strong>Note</strong>: Increase for slow networks or large message payloads</li></ul><h3 id="websocket-read-timeout" tabindex="-1">WEBSOCKET_READ_TIMEOUT <a class="header-anchor" href="#websocket-read-timeout" aria-label="Permalink to &quot;WEBSOCKET_READ_TIMEOUT&quot;">​</a></h3><ul><li><strong>Description</strong>: Read deadline timeout for WebSocket connections (in seconds)</li><li><strong>Default</strong>: <code>60</code></li><li><strong>Example</strong>: <code>WEBSOCKET_READ_TIMEOUT=120</code></li><li><strong>Note</strong>: Increase for clients that may have long periods between messages</li></ul><h3 id="websocket-write-buffer-size" tabindex="-1">WEBSOCKET_WRITE_BUFFER_SIZE <a class="header-anchor" href="#websocket-write-buffer-size" aria-label="Permalink to &quot;WEBSOCKET_WRITE_BUFFER_SIZE&quot;">​</a></h3><ul><li><strong>Description</strong>: Write buffer size in bytes</li><li><strong>Default</strong>: <code>8192</code> (8KB)</li><li><strong>Example</strong>: <code>WEBSOCKET_WRITE_BUFFER_SIZE=16384</code></li><li><strong>Note</strong>: Larger buffers improve throughput but use more memory per connection</li></ul><h3 id="websocket-enable-compression" tabindex="-1">WEBSOCKET_ENABLE_COMPRESSION <a class="header-anchor" href="#websocket-enable-compression" aria-label="Permalink to &quot;WEBSOCKET_ENABLE_COMPRESSION&quot;">​</a></h3><ul><li><strong>Description</strong>: Enable WebSocket compression (permessage-deflate)</li><li><strong>Default</strong>: <code>true</code></li><li><strong>Example</strong>: <code>WEBSOCKET_ENABLE_COMPRESSION=false</code></li><li><strong>Note</strong>: Compression reduces bandwidth but increases CPU usage</li></ul><h3 id="websocket-rate-limit-per-conn" tabindex="-1">WEBSOCKET_RATE_LIMIT_PER_CONN <a class="header-anchor" href="#websocket-rate-limit-per-conn" aria-label="Permalink to &quot;WEBSOCKET_RATE_LIMIT_PER_CONN&quot;">​</a></h3><ul><li><strong>Description</strong>: Maximum messages per second per connection (0 = unlimited)</li><li><strong>Default</strong>: <code>100</code></li><li><strong>Example</strong>: <code>WEBSOCKET_RATE_LIMIT_PER_CONN=200</code></li><li><strong>Note</strong>: Prevents individual connections from overwhelming the server</li></ul><h3 id="websocket-rate-limit-window" tabindex="-1">WEBSOCKET_RATE_LIMIT_WINDOW <a class="header-anchor" href="#websocket-rate-limit-window" aria-label="Permalink to &quot;WEBSOCKET_RATE_LIMIT_WINDOW&quot;">​</a></h3><ul><li><strong>Description</strong>: Rate limit window duration (in seconds)</li><li><strong>Default</strong>: <code>1</code></li><li><strong>Example</strong>: <code>WEBSOCKET_RATE_LIMIT_WINDOW=2</code></li><li><strong>Note</strong>: Time window for rate limiting calculations</li></ul><h3 id="websocket-cleanup-interval" tabindex="-1">WEBSOCKET_CLEANUP_INTERVAL <a class="header-anchor" href="#websocket-cleanup-interval" aria-label="Permalink to &quot;WEBSOCKET_CLEANUP_INTERVAL&quot;">​</a></h3><ul><li><strong>Description</strong>: Interval for cleanup goroutine to remove inactive connections (in seconds)</li><li><strong>Default</strong>: <code>300</code> (5 minutes)</li><li><strong>Example</strong>: <code>WEBSOCKET_CLEANUP_INTERVAL=600</code></li><li><strong>Note</strong>: How often to check for and remove idle connections</li></ul><h2 id="memory-pool-configuration" tabindex="-1">Memory Pool Configuration <a class="header-anchor" href="#memory-pool-configuration" aria-label="Permalink to &quot;Memory Pool Configuration&quot;">​</a></h2><p>The memory pool manages object reuse for frequently allocated objects (buffers, maps, slices) to reduce garbage collection pressure and improve performance.</p><h3 id="memory-pool-initial-buffer-size" tabindex="-1">MEMORY_POOL_INITIAL_BUFFER_SIZE <a class="header-anchor" href="#memory-pool-initial-buffer-size" aria-label="Permalink to &quot;MEMORY_POOL_INITIAL_BUFFER_SIZE&quot;">​</a></h3><ul><li><strong>Description</strong>: Initial buffer size for buffer pool in bytes</li><li><strong>Default</strong>: <code>4096</code> (4KB)</li><li><strong>Example</strong>: <code>MEMORY_POOL_INITIAL_BUFFER_SIZE=8192</code></li><li><strong>Note</strong>: Larger initial sizes reduce reallocations but use more memory per buffer</li></ul><h3 id="memory-pool-max-buffer-size" tabindex="-1">MEMORY_POOL_MAX_BUFFER_SIZE <a class="header-anchor" href="#memory-pool-max-buffer-size" aria-label="Permalink to &quot;MEMORY_POOL_MAX_BUFFER_SIZE&quot;">​</a></h3><ul><li><strong>Description</strong>: Maximum buffer size before discarding (in bytes)</li><li><strong>Default</strong>: <code>102400</code> (100KB)</li><li><strong>Example</strong>: <code>MEMORY_POOL_MAX_BUFFER_SIZE=204800</code></li><li><strong>Note</strong>: Buffers larger than this are discarded to prevent memory bloat</li></ul><h3 id="memory-pool-initial-slice-capacity" tabindex="-1">MEMORY_POOL_INITIAL_SLICE_CAPACITY <a class="header-anchor" href="#memory-pool-initial-slice-capacity" aria-label="Permalink to &quot;MEMORY_POOL_INITIAL_SLICE_CAPACITY&quot;">​</a></h3><ul><li><strong>Description</strong>: Initial slice capacity for slice pool in bytes</li><li><strong>Default</strong>: <code>4096</code> (4KB)</li><li><strong>Example</strong>: <code>MEMORY_POOL_INITIAL_SLICE_CAPACITY=8192</code></li><li><strong>Note</strong>: Larger initial capacities reduce reallocations but use more memory per slice</li></ul><h3 id="memory-pool-max-slice-capacity" tabindex="-1">MEMORY_POOL_MAX_SLICE_CAPACITY <a class="header-anchor" href="#memory-pool-max-slice-capacity" aria-label="Permalink to &quot;MEMORY_POOL_MAX_SLICE_CAPACITY&quot;">​</a></h3><ul><li><strong>Description</strong>: Maximum slice capacity before discarding (in bytes)</li><li><strong>Default</strong>: <code>102400</code> (100KB)</li><li><strong>Example</strong>: <code>MEMORY_POOL_MAX_SLICE_CAPACITY=204800</code></li><li><strong>Note</strong>: Slices larger than this are discarded to prevent memory bloat</li></ul><h2 id="garbage-collection-gc-configuration" tabindex="-1">Garbage Collection (GC) Configuration <a class="header-anchor" href="#garbage-collection-gc-configuration" aria-label="Permalink to &quot;Garbage Collection (GC) Configuration&quot;">​</a></h2><p>The garbage collection tuner monitors GC performance and can adaptively adjust GOGC based on pause times.</p><h3 id="gogc" tabindex="-1">GOGC <a class="header-anchor" href="#gogc" aria-label="Permalink to &quot;GOGC&quot;">​</a></h3><ul><li><strong>Description</strong>: Go garbage collection target percentage (controls heap growth)</li><li><strong>Default</strong>: <code>100</code> (Go runtime default)</li><li><strong>Example</strong>: <code>GOGC=150</code></li><li><strong>Note</strong>: <ul><li>Lower values (50-100): More frequent GCs, lower memory usage, potentially higher CPU</li><li>Higher values (150-300): Less frequent GCs, higher memory usage, potentially lower CPU</li><li>Range: 1-1000 (values outside this range are clamped)</li></ul></li></ul><h3 id="gc-metrics-update-interval" tabindex="-1">GC_METRICS_UPDATE_INTERVAL <a class="header-anchor" href="#gc-metrics-update-interval" aria-label="Permalink to &quot;GC_METRICS_UPDATE_INTERVAL&quot;">​</a></h3><ul><li><strong>Description</strong>: Interval for updating GC metrics (in seconds)</li><li><strong>Default</strong>: <code>5</code></li><li><strong>Example</strong>: <code>GC_METRICS_UPDATE_INTERVAL=10</code></li><li><strong>Note</strong>: How often GC metrics are collected and updated</li></ul><h3 id="gc-enable-adaptive-tuning" tabindex="-1">GC_ENABLE_ADAPTIVE_TUNING <a class="header-anchor" href="#gc-enable-adaptive-tuning" aria-label="Permalink to &quot;GC_ENABLE_ADAPTIVE_TUNING&quot;">​</a></h3><ul><li><strong>Description</strong>: Enable adaptive GC tuning based on pause times</li><li><strong>Default</strong>: <code>false</code></li><li><strong>Example</strong>: <code>GC_ENABLE_ADAPTIVE_TUNING=true</code></li><li><strong>Note</strong>: When enabled, GOGC is automatically adjusted to maintain target pause times</li></ul><h3 id="gc-target-pause-ms" tabindex="-1">GC_TARGET_PAUSE_MS <a class="header-anchor" href="#gc-target-pause-ms" aria-label="Permalink to &quot;GC_TARGET_PAUSE_MS&quot;">​</a></h3><ul><li><strong>Description</strong>: Target GC pause time in milliseconds (for adaptive tuning)</li><li><strong>Default</strong>: <code>10</code></li><li><strong>Example</strong>: <code>GC_TARGET_PAUSE_MS=20</code></li><li><strong>Note</strong>: Adaptive tuning will adjust GOGC to maintain this target pause time</li></ul><h3 id="gc-min-gogc" tabindex="-1">GC_MIN_GOGC <a class="header-anchor" href="#gc-min-gogc" aria-label="Permalink to &quot;GC_MIN_GOGC&quot;">​</a></h3><ul><li><strong>Description</strong>: Minimum GOGC value for adaptive tuning</li><li><strong>Default</strong>: <code>50</code></li><li><strong>Example</strong>: <code>GC_MIN_GOGC=25</code></li><li><strong>Note</strong>: Prevents GOGC from going too low (which would cause excessive GCs)</li></ul><h3 id="gc-max-gogc" tabindex="-1">GC_MAX_GOGC <a class="header-anchor" href="#gc-max-gogc" aria-label="Permalink to &quot;GC_MAX_GOGC&quot;">​</a></h3><ul><li><strong>Description</strong>: Maximum GOGC value for adaptive tuning</li><li><strong>Default</strong>: <code>500</code></li><li><strong>Example</strong>: <code>GC_MAX_GOGC=1000</code></li><li><strong>Note</strong>: Prevents GOGC from going too high (which would cause excessive memory usage)</li></ul><h2 id="example-env-file" tabindex="-1">Example .env File <a class="header-anchor" href="#example-env-file" aria-label="Permalink to &quot;Example .env File&quot;">​</a></h2><p>Create a <code>.env</code> file in the project root with the following structure:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Server Configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PORT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">8080</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ENVIRONMENT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">production</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ALLOWED_ORIGINS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">http://localhost:3000,https://example.com</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Database Configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DB_PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./data/ai-gateway-security.db</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DB_MAX_OPEN_CONNS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">100</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DB_MAX_IDLE_CONNS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">20</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DB_CONN_MAX_LIFETIME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">3600</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DB_LOG_LEVEL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">warn</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DB_RETENTION_DAYS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">90</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DB_MAX_PAYLOAD_SIZE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">102400</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Timeout Configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DB_QUERY_TIMEOUT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">EXTERNAL_API_TIMEOUT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">30</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">POLICY_VALIDATION_TIMEOUT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">5</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">REQUEST_HANDLER_TIMEOUT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">60</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># OAuth &amp; Security</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ENCRYPTION_KEY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">your-encryption-key-here</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Cache Configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CACHE_DASHBOARD_TTL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">60</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CACHE_POLICY_TTL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">300</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CACHE_PROXY_TTL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">300</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CACHE_ENABLE_ETAG</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">true</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Request Configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MAX_REQUEST_SIZE_MB</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">10</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># MCP Tool Scanning</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MCP_TOOL_SCAN_MAX_CONCURRENCY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">5</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MCP_TOOL_SCAN_TIMEOUT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">120</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MCP_TOOL_SCAN_INTERVAL_HOURS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">6</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Metrics Configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">METRICS_UPDATE_INTERVAL_SECONDS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">30</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ENABLE_METRICS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">true</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Tracing Configuration (OpenTelemetry)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">TRACING_ENABLED</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">TRACING_SERVICE_NAME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ai-security-gateway</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">TRACING_ENVIRONMENT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">development</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">TRACING_OTLP_ENDPOINT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">http://localhost:4318</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">TRACING_SAMPLE_RATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1.0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Langfuse Integration (LLM Observability)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">LANGFUSE_ENABLED</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">LANGFUSE_OTLP_ENDPOINT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">https://cloud.langfuse.com</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">LANGFUSE_PUBLIC_KEY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">LANGFUSE_SECRET_KEY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># HTTP Client Pool Configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">HTTP_CLIENT_POOL_MAX_IDLE_CONNS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">100</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">HTTP_CLIENT_POOL_MAX_IDLE_CONNS_PER_HOST</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">HTTP_CLIENT_POOL_MAX_CONNS_PER_HOST</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">HTTP_CLIENT_POOL_IDLE_TIMEOUT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">90</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">HTTP_CLIENT_POOL_DISABLE_KEEP_ALIVES</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">HTTP_CLIENT_POOL_DISABLE_COMPRESSION</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">HTTP_CLIENT_POOL_TLS_HANDSHAKE_TIMEOUT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">HTTP_CLIENT_POOL_RESPONSE_HEADER_TIMEOUT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">HTTP_CLIENT_POOL_EXPECT_CONTINUE_TIMEOUT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">HTTP_CLIENT_POOL_DEFAULT_TIMEOUT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">30</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># WebSocket Configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">WEBSOCKET_MAX_CONNECTIONS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1000</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">WEBSOCKET_MAX_IDLE_TIME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">600</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">WEBSOCKET_PING_INTERVAL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">30</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">WEBSOCKET_WRITE_TIMEOUT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">WEBSOCKET_READ_TIMEOUT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">60</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">WEBSOCKET_WRITE_BUFFER_SIZE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">8192</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">WEBSOCKET_ENABLE_COMPRESSION</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">WEBSOCKET_RATE_LIMIT_PER_CONN</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">100</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">WEBSOCKET_RATE_LIMIT_WINDOW</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">WEBSOCKET_CLEANUP_INTERVAL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">300</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Memory Pool Configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MEMORY_POOL_INITIAL_BUFFER_SIZE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">4096</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MEMORY_POOL_MAX_BUFFER_SIZE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">102400</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MEMORY_POOL_INITIAL_SLICE_CAPACITY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">4096</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MEMORY_POOL_MAX_SLICE_CAPACITY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">102400</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Garbage Collection Configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">GOGC</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">100</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">GC_METRICS_UPDATE_INTERVAL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">5</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">GC_ENABLE_ADAPTIVE_TUNING</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">GC_TARGET_PAUSE_MS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">GC_MIN_GOGC</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">50</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">GC_MAX_GOGC</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">500</span></span></code></pre></div><h2 id="performance-tuning-recommendations" tabindex="-1">Performance Tuning Recommendations <a class="header-anchor" href="#performance-tuning-recommendations" aria-label="Permalink to &quot;Performance Tuning Recommendations&quot;">​</a></h2><h3 id="high-concurrency-scenarios" tabindex="-1">High-Concurrency Scenarios <a class="header-anchor" href="#high-concurrency-scenarios" aria-label="Permalink to &quot;High-Concurrency Scenarios&quot;">​</a></h3><p>For deployments with many concurrent users and proxies:</p><ul><li>Increase <code>DB_MAX_OPEN_CONNS</code> to 100-200 (default is now 100)</li><li>Increase <code>DB_MAX_IDLE_CONNS</code> to 20-50 (default is now 20)</li><li>Increase <code>DB_QUERY_TIMEOUT</code> to 15-30 seconds</li><li>Set <code>DB_MAX_PAYLOAD_SIZE</code> to 50KB-100KB for better INSERT performance with large audit logs</li></ul><h3 id="low-resource-environments" tabindex="-1">Low-Resource Environments <a class="header-anchor" href="#low-resource-environments" aria-label="Permalink to &quot;Low-Resource Environments&quot;">​</a></h3><p>For resource-constrained deployments:</p><ul><li>Decrease <code>DB_MAX_OPEN_CONNS</code> to 25-30</li><li>Decrease <code>DB_MAX_IDLE_CONNS</code> to 5-10</li><li>Keep default timeout values</li></ul><h3 id="production-recommendations" tabindex="-1">Production Recommendations <a class="header-anchor" href="#production-recommendations" aria-label="Permalink to &quot;Production Recommendations&quot;">​</a></h3><ul><li>Always set <code>ENCRYPTION_KEY</code> to a secure random value</li><li>Use <code>DB_LOG_LEVEL=warn</code> or <code>error</code> in production</li><li>Monitor connection pool utilization and adjust accordingly</li><li>Set appropriate retention periods based on compliance requirements</li><li>For deployments with many MCP proxies, increase <code>MCP_TOOL_SCAN_MAX_CONCURRENCY</code> to 10-20</li><li>Adjust <code>MCP_TOOL_SCAN_TIMEOUT</code> based on typical proxy response times</li><li>For high-traffic deployments, increase <code>HTTP_CLIENT_POOL_MAX_IDLE_CONNS</code> to 200-500</li><li>Monitor HTTP client pool metrics via <code>/api/v1/metrics</code> endpoint</li><li>For deployments with many WebSocket clients, increase <code>WEBSOCKET_MAX_CONNECTIONS</code> to 2000-5000</li><li>Monitor WebSocket metrics via <code>/api/v1/metrics</code> endpoint (includes active connections, messages sent/failed, latency)</li><li>Adjust <code>WEBSOCKET_PING_INTERVAL</code> based on network conditions (lower for unstable networks)</li><li>For high-throughput scenarios, increase <code>MEMORY_POOL_INITIAL_BUFFER_SIZE</code> to 8192-16384 to reduce reallocations</li><li>Monitor memory pool hit rates via <code>/api/v1/metrics</code> endpoint (higher hit rates indicate better memory reuse)</li><li>For low-latency applications, set <code>GOGC=50-100</code> to reduce GC pause times (at the cost of more frequent GCs)</li><li>For memory-constrained environments, set <code>GOGC=150-200</code> to reduce memory usage (at the cost of longer pause times)</li><li>Enable <code>GC_ENABLE_ADAPTIVE_TUNING=true</code> for automatic GC tuning based on pause times</li><li>Monitor GC metrics via <code>/api/v1/metrics</code> endpoint (includes pause times, heap usage, GC frequency)</li></ul>`,187)])])}const E=e(t,[["render",o]]);export{p as __pageData,E as default};
